{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n//@ts-nocheck;\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\"; // @ts-ignore\n\nimport { uuid } from 'uuidv4';\nexport var configJSON = require(\"./config\");\n;\n\nvar EmailAccountRegistrationController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(EmailAccountRegistrationController, _BlockComponent);\n\n  var _super = _createSuper(EmailAccountRegistrationController);\n\n  // Customizable Area Start\n  // Customizable Area End\n  function EmailAccountRegistrationController(props) {\n    var _this;\n\n    _classCallCheck(this, EmailAccountRegistrationController);\n\n    _this = _super.call(this, props);\n    _this.apiEmailLoginCallId = \"\";\n    _this.validationApiCallId = \"\";\n    _this.emailReg = void 0;\n    _this.labelTitle = \"\";\n    _this.verfiySocialLoginApiCallId = void 0;\n    _this.registartionEmailCallId = void 0;\n    _this.guestRegisterApiCallId = void 0;\n    _this.sendOTPAPICallId = void 0;\n\n    _this.showPassword = function (e) {\n      e.preventDefault();\n\n      _this.setState(function (prevState) {\n        return {\n          showPass: !prevState.showPass\n        };\n      });\n    };\n\n    _this.signupUser = function (values) {\n      _this.setState({\n        showSpinner: true\n      });\n\n      var data = {\n        data: {\n          type: \"email_account\",\n          attributes: {\n            email: values.Email,\n            full_name: values.FullName,\n            phone_number: values.fullPhoneNumber\n          },\n          process: \"register\"\n        }\n      };\n      localStorage.setItem(\"signUpUser\", JSON.stringify(values));\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.sendOTPAPICallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.sendEmailOTPAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      return runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.registartionEmail = function (values) {\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.registartionEmailCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.registrationThorughEmailAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var requestBody = {\n        \"data\": {\n          \"type\": \"email_account\",\n          \"process\": \"register\",\n          \"attributes\": {\n            \"email\": values.Email\n          }\n        }\n      }; //setting userDeatils to state\n\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        userEmail: values.Email,\n        userPassword: values.password,\n        userName: values.FullName\n      }));\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.verifyEmailBeforeRegistartion = function (resultData, socialMediaName) {\n      //@ts-ignore\n      var guestuserID = localStorage.getItem('guestUUID');\n      var requestBody;\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.verfiySocialLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n\n      if (guestuserID) {\n        requestBody = {\n          \"uuid\": guestuserID,\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      } else {\n        requestBody = {\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      }\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.guestRegister = function () {\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        loading: true\n      }));\n\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.guestRegisterApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestRegistrationAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var generateUUId = uuid();\n      localStorage.setItem('guestUUID', generateUUId);\n      var requestBody = {\n        \"data\": {\n          \"type\": \"guest_account\",\n          \"attributes\": {\n            \"uuid\": generateUUId\n          }\n        }\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this));\n    _this.signupUser = _this.signupUser.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.AccoutLoginSuccess), getName(MessageEnum.AlertMessage), getName(MessageEnum.CountryCodeMessage), getName(MessageEnum.ReciveUserCredentials)];\n    _this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false,\n      emailErr: \"\"\n    };\n    _this.emailReg = new RegExp(\"\");\n    _this.labelTitle = configJSON.labelTitle; // Customizable Area End\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this));\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(EmailAccountRegistrationController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(EmailAccountRegistrationController.prototype), \"componentDidMount\", this).call(this);\n\n                this.send(new Message(getName(MessageEnum.RequestUserCredentials))); // Customizable Area Start\n                // Customizable Area End\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(from, message) {\n        var _this2 = this;\n\n        var apiRequestCallId, responseJson, errorResponse, _this$state$socialMed, user, credential, additionalUserInfo, dat, GuestUserId, _this$props$history, _data$attributes, _responseJson$data, data, name, _responseJson$errors$, _responseJson$errors$2;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                runEngine.debugLog('Message Received', message);\n\n                if (!(message.id === getName(MessageEnum.RestAPIResponceMessage))) {\n                  _context2.next = 31;\n                  break;\n                }\n\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                if (!(apiRequestCallId === this.registartionEmailCallId)) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                if (responseJson && responseJson.data && responseJson.meta) {\n                  this.setState(_objectSpread({}, this.state));\n                }\n\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                  this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                    showAlert: true,\n                    messageType: 'danger',\n                    message: responseJson.errors[0].account\n                  }));\n                }\n\n                _context2.next = 29;\n                break;\n\n              case 10:\n                if (!(apiRequestCallId === this.verfiySocialLoginApiCallId)) {\n                  _context2.next = 28;\n                  break;\n                }\n\n                if (!responseJson) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                if (!this.state.socialMediaResult) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                _this$state$socialMed = this.state.socialMediaResult, user = _this$state$socialMed.user, credential = _this$state$socialMed.credential, additionalUserInfo = _this$state$socialMed.additionalUserInfo;\n                dat = {\n                  'email': user.email,\n                  'name': user.displayName\n                };\n                console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                GuestUserId = localStorage.getItem('guestUUID');\n\n                if (GuestUserId) {\n                  setTimeout(function () {\n                    _this2.props.history.push('/cart');\n                  }, 1000);\n                } else {\n                  setTimeout(function () {\n                    _this2.props.history.push('/home-page');\n                  }, 1000);\n                }\n\n                _context2.next = 20;\n                return localStorage.setItem('user', JSON.stringify(responseJson.data));\n\n              case 20:\n                _context2.next = 22;\n                return localStorage.setItem('token', responseJson.meta.token);\n\n              case 22:\n                _context2.next = 24;\n                return localStorage.setItem('profileImage', user.photoURL);\n\n              case 24:\n                _context2.next = 26;\n                return localStorage.setItem('userData', JSON.stringify(dat));\n\n              case 26:\n                _context2.next = 29;\n                break;\n\n              case 28:\n                if (apiRequestCallId === this.guestRegisterApiCallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                      loading: false\n                    }));\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token); //@ts-ignore\n\n                    window.notify([{\n                      type: 'success',\n                      message: 'Welcome to Our Store!'\n                    }]);\n                    (_this$props$history = this.props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history.push('/home-page');\n                  }\n                } else if (apiRequestCallId === this.sendOTPAPICallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                      showSpinner: false\n                    });\n                    data = responseJson.data;\n                    name = data === null || data === void 0 ? void 0 : (_data$attributes = data.attributes) === null || _data$attributes === void 0 ? void 0 : _data$attributes.full_name;\n                    localStorage.setItem('token', responseJson.meta.token);\n                    localStorage.setItem('userFullName', name);\n                    this.props.history.push({\n                      pathname: '/otpconfirm',\n                      state: {\n                        data: (_responseJson$data = responseJson.data) === null || _responseJson$data === void 0 ? void 0 : _responseJson$data.user\n                      }\n                    }); // @ts-ignore\n\n                    window.notify([{\n                      message: \"OTP has beed sent to you\",\n                      type: \"success\"\n                    }]);\n                  }\n\n                  if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    this.setState({\n                      showSpinner: false\n                    }); //@ts-ignore\n\n                    window.notify([{\n                      message: ((_responseJson$errors$ = responseJson.errors[0]) === null || _responseJson$errors$ === void 0 ? void 0 : _responseJson$errors$.phone_number) || ((_responseJson$errors$2 = responseJson.errors[0]) === null || _responseJson$errors$2 === void 0 ? void 0 : _responseJson$errors$2.account) || 'something went wrong!',\n                      type: 'danger'\n                    }]);\n                  }\n                }\n\n              case 29:\n                _context2.next = 31;\n                break;\n\n              case 31:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }() //Registeration through Email\n\n  }]);\n\n  return EmailAccountRegistrationController;\n}(BlockComponent);\n\nexport { EmailAccountRegistrationController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/email-account-registration/src/EmailRegistartionController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","uuid","configJSON","require","EmailAccountRegistrationController","props","apiEmailLoginCallId","validationApiCallId","emailReg","labelTitle","verfiySocialLoginApiCallId","registartionEmailCallId","guestRegisterApiCallId","sendOTPAPICallId","showPassword","e","preventDefault","setState","prevState","showPass","signupUser","values","showSpinner","data","type","attributes","email","Email","full_name","FullName","phone_number","fullPhoneNumber","process","localStorage","setItem","JSON","stringify","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","sendEmailOTPAPIEndPoint","headers","RestAPIRequestHeaderMessage","RestAPIRequestBodyMessage","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","registartionEmail","registrationThorughEmailAPIEndPoint","requestBody","state","userEmail","userPassword","password","userName","verifyEmailBeforeRegistartion","resultData","socialMediaName","guestuserID","getItem","socialRegistartionAPIEndPoint","credential","accessToken","guestRegister","loading","guestRegistrationAPIEndPoint","generateUUId","receive","bind","subScribedMessages","RestAPIResponceMessage","AccoutLoginSuccess","AlertMessage","CountryCodeMessage","ReciveUserCredentials","loginError","emailErr","RegExp","attachBuildingBlock","send","RequestUserCredentials","from","message","debugLog","apiRequestCallId","getData","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorResponse","RestAPIResponceErrorMessage","meta","errors","length","showAlert","messageType","account","socialMediaResult","user","additionalUserInfo","dat","displayName","console","log","photoURL","GuestUserId","setTimeout","history","push","token","window","notify","name","pathname"],"mappings":"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","sourcesContent":["//@ts-nocheck;\nimport { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n    getName\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\n// @ts-ignore\nimport map from \"lodash/map\";\nimport axios from \"axios\";\nimport { uuid } from 'uuidv4';\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n    navigation: any;\n    id: string;\n    history: any\n    isPopup: boolean\n    // Customizable Area Start\n    // Customizable Area End\n};\n\ninterface S {\n    // Customizable Area Start\n    showSpinner: boolean;\n    loginError: string;\n    showPass: boolean;\n    emailErr: string;\n\n    //success Email Response Data\n    userToken?: string;\n    userEmail?: string;\n    userName?: string;\n    userPassword?: string;\n\n    //social media result\n    socialMediaResult?: any;\n\n\n    // showing alerts\n    showAlert?: boolean;\n    messageType?: any;\n    message?: any;\n\n    loading?: boolean;\n    // Customizable Area End\n}\n\ninterface SS {\n    // Customizable Area Start\n    id: any;\n    // Customizable Area End\n}\n\nexport default class EmailAccountRegistrationController extends BlockComponent<Props, S, SS> {\n\n    // Customizable Area Start\n    apiEmailLoginCallId: string = \"\";\n    validationApiCallId: string = \"\";\n    emailReg: RegExp;\n    labelTitle: string = \"\";\n    verfiySocialLoginApiCallId: string;\n    registartionEmailCallId: string;\n    guestRegisterApiCallId: string;\n    sendOTPAPICallId: string;\n    // Customizable Area End\n\n    constructor(props: Props) {\n        super(props);\n        this.receive = this.receive.bind(this);\n        this.signupUser = this.signupUser.bind(this);\n\n        // Customizable Area Start\n        this.subScribedMessages = [\n            getName(MessageEnum.RestAPIResponceMessage),\n            getName(MessageEnum.AccoutLoginSuccess),\n            getName(MessageEnum.AlertMessage),\n            getName(MessageEnum.CountryCodeMessage),\n            getName(MessageEnum.ReciveUserCredentials)\n        ];\n        this.state = {\n            showSpinner: false,\n            loginError: \"\",\n            showPass: false,\n            emailErr: \"\"\n        };\n\n        this.emailReg = new RegExp(\"\");\n        this.labelTitle = configJSON.labelTitle;\n        // Customizable Area End\n\n        this.receive = this.receive.bind(this);\n        runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n    };\n\n    async componentDidMount() {\n        super.componentDidMount();\n        this.send(new Message(getName(MessageEnum.RequestUserCredentials)));\n        // Customizable Area Start\n        // Customizable Area End\n\n    }\n\n    showPassword = (e: any) => {\n        e.preventDefault();\n        this.setState(prevState => ({\n            showPass: !prevState.showPass\n        }))\n    };\n\n    signupUser = (values: any) => {\n        this.setState({ showSpinner: true });\n        const data = {\n            data: {\n                type: \"email_account\",\n                attributes: {\n                    email: values.Email,\n                    full_name: values.FullName,\n                    phone_number: values.fullPhoneNumber\n                },\n                process: \"register\"\n            }\n        }\n        localStorage.setItem(\"signUpUser\", JSON.stringify(values));\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        this.sendOTPAPICallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.sendEmailOTPAPIEndPoint);\n\n        const headers = {\n            'Content-Type': 'application/json',\n        };\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n        return runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    async receive(from: String, message: Message) {\n        runEngine.debugLog('Message Received', message);\n        if (message.id === getName(MessageEnum.RestAPIResponceMessage)) {\n            let apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n            var responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n            var errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n            if (apiRequestCallId === this.registartionEmailCallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                        ...this.state,\n                    });\n                }\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    this.setState({\n                        ...this.state,\n                        showAlert: true,\n                        messageType: 'danger',\n                        message: responseJson.errors[0].account\n                    })\n                }\n            }\n            else if (apiRequestCallId === this.verfiySocialLoginApiCallId) {\n                if (responseJson) {\n                    if (this.state.socialMediaResult) {\n                        const { user, credential, additionalUserInfo } = this.state.socialMediaResult;\n                        let dat = {\n                            'email': user.email,\n                            'name': user.displayName\n                        }\n                        console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                        const GuestUserId = localStorage.getItem('guestUUID');\n                        if (GuestUserId) {\n                            setTimeout(() => {\n                                this.props.history.push('/cart');\n                            }, 1000);\n                        } else {\n                            setTimeout(() => {\n                                this.props.history.push('/home-page');\n                            }, 1000);\n                        }\n                        await localStorage.setItem('user', JSON.stringify(responseJson.data));\n                        await localStorage.setItem('token', responseJson.meta.token);\n                        await localStorage.setItem('profileImage', user.photoURL);\n                        await localStorage.setItem('userData', JSON.stringify(dat));\n                    }\n                }\n            }\n            else if (apiRequestCallId === this.guestRegisterApiCallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                        ...this.state,\n                        loading: false\n                    });\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token);\n                    //@ts-ignore\n                    window.notify([{ type: 'success', message: 'Welcome to Our Store!' }]);\n                    this.props.history?.push('/home-page');\n                }\n            }\n            else if (apiRequestCallId === this.sendOTPAPICallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({ showSpinner: false });\n                    const { data } = responseJson;\n                    const name = data?.attributes?.full_name;\n                    localStorage.setItem('token', responseJson.meta.token);\n                    localStorage.setItem('userFullName', name);\n                    this.props.history.push({\n                        pathname: '/otpconfirm',\n                        state: {\n                            data: responseJson.data?.user,\n                        },\n                    });\n                    // @ts-ignore\n                    window.notify([{ message: \"OTP has beed sent to you\", type: \"success\" }]);\n                }\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    this.setState({ showSpinner: false });\n                    //@ts-ignore\n                    window.notify([{ message: responseJson.errors[0]?.phone_number || responseJson.errors[0]?.account || 'something went wrong!', type: 'danger' }]);\n                }\n            }\n        }\n        else {\n\n        }\n    }\n\n    //Registeration through Email\n    registartionEmail = (values: any) => {\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.registartionEmailCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.registrationThorughEmailAPIEndPoint);\n\n        const headers = {\n            'Content-Type': 'application/json',\n        };\n        const requestBody = {\n            \"data\": {\n                \"type\": \"email_account\",\n                \"process\": \"register\",\n                \"attributes\": {\n                    \"email\": values.Email,\n                },\n            }\n        };\n\n        //setting userDeatils to state\n        this.setState({\n            ...this.state,\n            userEmail: values.Email,\n            userPassword: values.password,\n            userName: values.FullName\n        });\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //registartion through social Login\n    verifyEmailBeforeRegistartion = (resultData: any, socialMediaName: string) => {\n        //@ts-ignore\n        const guestuserID = localStorage.getItem('guestUUID');\n        let requestBody;\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.verfiySocialLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        if (guestuserID) {\n            requestBody = {\n                \"uuid\": guestuserID,\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken,\n                    }\n                }\n            };\n        } else {\n            requestBody = {\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken\n                    }\n                }\n            };\n        }\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //guest user Registration\n    guestRegister = () => {\n        this.setState({\n            ...this.state,\n            loading: true\n        });\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.guestRegisterApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestRegistrationAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        const generateUUId = uuid();\n        localStorage.setItem('guestUUID', generateUUId);\n        const requestBody = {\n            \"data\": {\n                \"type\": \"guest_account\",\n                \"attributes\": {\n                    \"uuid\": generateUUId\n                }\n            }\n        };\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}