{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Message } from \"../../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4'; // Customizable Area Start\n// Customizable Area End\n\nexport var configJSON = require(\"./config\");\n\nvar EmailAccountLoginController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(EmailAccountLoginController, _BlockComponent);\n\n  var _super = _createSuper(EmailAccountLoginController);\n\n  // Customizable Area Start\n  // Customizable Area End\n  function EmailAccountLoginController(props) {\n    var _this;\n\n    _classCallCheck(this, EmailAccountLoginController);\n\n    _this = _super.call(this, props);\n    _this.apiEmailLoginCallId = \"\";\n    _this.validationApiCallId = \"\";\n    _this.emailReg = void 0;\n    _this.labelTitle = \"\";\n    _this.verfiySocialLoginApiCallId = void 0;\n    _this.guestLoginApiCallId = void 0;\n    _this.loginAPICallID = void 0;\n\n    _this.showPassword = function (e) {\n      e.preventDefault();\n\n      _this.setState(function (prevState) {\n        return {\n          showPass: !prevState.showPass\n        };\n      });\n    };\n\n    _this.setShowSpinner = function (value) {\n      _this.setState({\n        showSpinner: value\n      });\n    };\n\n    _this.verifyEmailBeforeRegistartion = function (resultData, socialMediaName) {\n      //@ts-ignore\n      var guestuserID = localStorage.getItem('guestUUID');\n      var requestBody;\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.verfiySocialLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n\n      if (guestuserID) {\n        requestBody = {\n          \"uuid\": guestuserID,\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      } else {\n        requestBody = {\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      }\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.guestLogin = function () {\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        loading: true\n      }));\n\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.guestLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var generateID = uuid();\n      console.log(\"&&&&&&&&\", generateID);\n      localStorage.setItem('guestUUID', generateID);\n      var requestBody = {\n        \"data\": {\n          \"type\": \"guest_account\",\n          \"attributes\": {\n            \"uuid\": generateID\n          }\n        }\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.handleSubmitLogin = function (data) {\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.loginAPICallID = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiCallEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.CountryCodeMessage), getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.ReciveUserCredentials)];\n    _this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false\n    };\n    _this.emailReg = new RegExp(\"\");\n    _this.labelTitle = configJSON.labelTitle; // Customizable Area End\n\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(EmailAccountLoginController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isNewUserToken, isNewUserData, _this$props$location, _this$props$location$, _this$props, _this$props$history;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.scrollTo(0, 0);\n                this.send(new Message(getName(MessageEnum.RequestUserCredentials))); // Customizable Area Start\n                //@ts-ignore\n\n                isNewUserToken = localStorage.getItem('SignUPtoken');\n                isNewUserData = localStorage.getItem('signUpUser');\n\n                if (isNewUserData && isNewUserToken) {\n                  localStorage.clear();\n                } else {\n                  //@ts-ignore\n                  if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && ((_this$props$location = this.props.location) === null || _this$props$location === void 0 ? void 0 : (_this$props$location$ = _this$props$location.state) === null || _this$props$location$ === void 0 ? void 0 : _this$props$location$.calledFrom) !== \"guest-login\") {\n                    (_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$history = _this$props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history.push('/home-page');\n                  }\n                } // Customizable Area End\n\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() // Customizable Area Start\n\n  }, {\n    key: \"verifyGuestToken\",\n    value: function () {\n      var _verifyGuestToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                token = window.localStorage.getItem(\"token\");\n                return _context2.abrupt(\"return\", token === null || token === void 0 ? void 0 : token.length);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function verifyGuestToken() {\n        return _verifyGuestToken.apply(this, arguments);\n      }\n\n      return verifyGuestToken;\n    }() // Customizable Area End\n\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(from, message) {\n        var _this2 = this;\n\n        var apiRequestCallId, responseJson, errorResponse, _this$state$socialMed, user, credential, additionalUserInfo, dat, guestId, _this$props$location2, _this$props$location3, _this$props$history2, data, meta, _dat, guestuserID, GuesrUserId, GuestUserData, _this$props2, _this$props2$location, _this$props2$location2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // Customizable Area Start\n                runEngine.debugLog('Message Received', message);\n\n                if (!(message.id === getName(MessageEnum.RestAPIResponceMessage))) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                if (!(apiRequestCallId === this.verfiySocialLoginApiCallId)) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!responseJson) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!this.state.socialMediaResult) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                _this$state$socialMed = this.state.socialMediaResult, user = _this$state$socialMed.user, credential = _this$state$socialMed.credential, additionalUserInfo = _this$state$socialMed.additionalUserInfo;\n                dat = {\n                  'email': user.email,\n                  'name': user.displayName\n                };\n                console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                _context3.next = 13;\n                return localStorage.setItem('user', JSON.stringify(responseJson.data));\n\n              case 13:\n                _context3.next = 15;\n                return localStorage.setItem('token', responseJson.meta.token);\n\n              case 15:\n                _context3.next = 17;\n                return localStorage.setItem('profileImage', user.photoURL);\n\n              case 17:\n                _context3.next = 19;\n                return localStorage.setItem('userData', JSON.stringify(dat));\n\n              case 19:\n                guestId = localStorage.getItem('guestUUID');\n\n                if (guestId) {\n                  //@ts-ignore\n                  ((_this$props$location2 = this.props.location) === null || _this$props$location2 === void 0 ? void 0 : (_this$props$location3 = _this$props$location2.state) === null || _this$props$location3 === void 0 ? void 0 : _this$props$location3.redirect) === \"wishlist\" ? setTimeout(function () {\n                    _this2.props.history.push({\n                      pathname: \"/profilebio\",\n                      state: {\n                        activeTab: \"wishlist\"\n                      }\n                    });\n                  }, 1000) : setTimeout(function () {\n                    _this2.props.history.push('/cart');\n                  }, 1000);\n                } else {\n                  setTimeout(function () {\n                    _this2.props.history.push('/home-page');\n                  }, 1000);\n                }\n\n              case 21:\n                if (apiRequestCallId === this.guestLoginApiCallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                      loading: false\n                    }));\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token); //@ts-ignore\n\n                    window.notify([{\n                      type: 'success',\n                      message: 'Welcome to Our Store !'\n                    }]);\n                    (_this$props$history2 = this.props.history) === null || _this$props$history2 === void 0 ? void 0 : _this$props$history2.push('/home-page');\n                  }\n                }\n\n                if (apiRequestCallId === this.loginAPICallID) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    data = responseJson.data, meta = responseJson.meta;\n\n                    if (meta && meta.token) {\n                      localStorage.setItem(\"token\", meta.token);\n                    }\n\n                    if (data) {\n                      localStorage.setItem(\"user\", JSON.stringify(data));\n                      _dat = {\n                        'email': data.attributes.email,\n                        'name': data.attributes.full_name\n                      }; //@ts-ignore\n\n                      guestuserID = localStorage.getItem('guestUUID');\n                      localStorage.setItem('userData', JSON.stringify(_dat));\n                      localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                      GuesrUserId = localStorage.getItem('guestUUID');\n                      GuestUserData = localStorage.getItem('guestUserData');\n\n                      if (GuestUserData && guestuserID) {\n                        //@ts-ignore\n                        ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$location = _this$props2.location) === null || _this$props2$location === void 0 ? void 0 : (_this$props2$location2 = _this$props2$location.state) === null || _this$props2$location2 === void 0 ? void 0 : _this$props2$location2.redirect) === 'wishlist' ? setTimeout(function () {\n                          var _this2$props$history;\n\n                          (_this2$props$history = _this2.props.history) === null || _this2$props$history === void 0 ? void 0 : _this2$props$history.push({\n                            pathname: '/profilebio',\n                            state: {\n                              activeTab: \"wishlist\"\n                            }\n                          });\n                        }, 1000) : // @ts-ignore\n                        this.routeToAll(\"/cart\");\n                      } else {\n                        //@ts-ignore\n                        window.notify([{\n                          type: 'success',\n                          message: meta === null || meta === void 0 ? void 0 : meta.message\n                        }]); // @ts-ignore\n\n                        this.routeToAll(\"/home-page\");\n                      }\n                    }\n                  }\n\n                  if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0]);\n                    this.setShowSpinner(false); // @ts-ignore\n\n                    window.notify([{\n                      message: responseJson.errors[0].pin || \"Something went wrong!!!\",\n                      type: \"danger\"\n                    }]);\n                  }\n                }\n\n                _context3.next = 25;\n                break;\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }()\n  }, {\n    key: \"logInWithFaceBook\",\n    value: function logInWithFaceBook() {\n      console.log(\"logInWithFaceBook\");\n    }\n  }, {\n    key: \"logInWithGoogle\",\n    value: function logInWithGoogle() {\n      console.log(\"logInWithGoogle\");\n    }\n  }, {\n    key: \"routeToAll\",\n    value: function routeToAll(route) {\n      this.props.history.push(route);\n    }\n  }]);\n\n  return EmailAccountLoginController;\n}(BlockComponent);\n\nexport { EmailAccountLoginController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/email-account-login/src/EmailAccountLoginController.web/EmailAccountLoginController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","uuid","configJSON","require","EmailAccountLoginController","props","apiEmailLoginCallId","validationApiCallId","emailReg","labelTitle","verfiySocialLoginApiCallId","guestLoginApiCallId","loginAPICallID","showPassword","e","preventDefault","setState","prevState","showPass","setShowSpinner","value","showSpinner","verifyEmailBeforeRegistartion","resultData","socialMediaName","guestuserID","localStorage","getItem","requestBody","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","socialRegistartionAPIEndPoint","headers","credential","accessToken","RestAPIRequestHeaderMessage","RestAPIRequestBodyMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","guestLogin","state","loading","guestLoginAPIEndPoint","generateID","console","log","setItem","handleSubmitLogin","data","loginAPiCallEndPoint","receive","bind","subScribedMessages","CountryCodeMessage","RestAPIResponceMessage","ReciveUserCredentials","loginError","RegExp","attachBuildingBlock","window","scrollTo","send","RequestUserCredentials","isNewUserToken","isNewUserData","clear","verifyGuestToken","location","calledFrom","history","push","token","length","from","message","debugLog","apiRequestCallId","getData","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorResponse","RestAPIResponceErrorMessage","socialMediaResult","user","additionalUserInfo","dat","email","displayName","photoURL","meta","guestId","redirect","setTimeout","pathname","activeTab","notify","type","attributes","full_name","image_url","GuesrUserId","GuestUserData","routeToAll","errors","pin","route"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../../framework/src/IBlock\";\nimport { Message } from \"../../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n  getName\n} from \"../../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4';\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n  navigation: any;\n  id: string;\n  history: any\n  // Customizable Area Start\n  // Customizable Area End\n}\n\ninterface S {\n  // Customizable Area Start\n  showSpinner: boolean;\n  loginError: string,\n  showPass: boolean,\n\n  loading?: boolean;\n  socialMediaResult?: any;\n  // Customizable Area End\n}\n\ninterface SS {\n  // Customizable Area Start\n  id: any;\n  // Customizable Area End\n}\n\nexport default class EmailAccountLoginController extends BlockComponent<Props, S, SS> {\n\n  // Customizable Area Start\n  apiEmailLoginCallId: string = \"\";\n  validationApiCallId: string = \"\";\n  emailReg: RegExp;\n  labelTitle: string = \"\";\n  verfiySocialLoginApiCallId: string;\n  guestLoginApiCallId: string;\n  loginAPICallID: string;\n  // Customizable Area End\n\n  constructor(props: Props) {\n\n    super(props);\n    this.receive = this.receive.bind(this);\n    // Customizable Area Start\n    this.subScribedMessages = [\n      getName(MessageEnum.CountryCodeMessage),\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.ReciveUserCredentials)\n    ]\n\n    this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false,\n    };\n\n    this.emailReg = new RegExp(\"\");\n    this.labelTitle = configJSON.labelTitle;\n    // Customizable Area End\n\n    runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n\n  }\n\n  async componentDidMount() {\n    window.scrollTo(0, 0);\n    this.send(new Message(getName(MessageEnum.RequestUserCredentials)));\n    // Customizable Area Start\n\n    //@ts-ignore\n    const isNewUserToken = localStorage.getItem('SignUPtoken');\n    const isNewUserData = localStorage.getItem('signUpUser');\n    if (isNewUserData && isNewUserToken) {\n      localStorage.clear();\n    } else {\n      //@ts-ignore\n      if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && this.props.location?.state?.calledFrom !== \"guest-login\") {\n        this.props?.history?.push('/home-page');\n      }\n    }\n    // Customizable Area End\n  }\n\n  // Customizable Area Start\n  async verifyGuestToken() {\n    let token = window.localStorage.getItem(\"token\");\n    return token?.length;\n  }\n  // Customizable Area End\n\n  async receive(from: string, message: Message) {\n    // Customizable Area Start\n    runEngine.debugLog('Message Received', message);\n    if (message.id === getName(MessageEnum.RestAPIResponceMessage)) {\n      let apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n      var responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n      var errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n      if (apiRequestCallId === this.verfiySocialLoginApiCallId) {\n        if (responseJson) {\n          if (this.state.socialMediaResult) {\n            const { user, credential, additionalUserInfo } = this.state.socialMediaResult;\n            let dat = {\n              'email': user.email,\n              'name': user.displayName\n            }\n            console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n            await localStorage.setItem('user', JSON.stringify(responseJson.data));\n            await localStorage.setItem('token', responseJson.meta.token);\n            await localStorage.setItem('profileImage', user.photoURL);\n            await localStorage.setItem('userData', JSON.stringify(dat));\n            const guestId = localStorage.getItem('guestUUID');\n            if (guestId) {\n              //@ts-ignore\n              this.props.location?.state?.redirect === \"wishlist\"\n                ?\n                (\n                  setTimeout(() => {\n                    this.props.history.push({\n                      pathname: \"/profilebio\",\n                      state: { activeTab: \"wishlist\" }\n                    });\n                  }, 1000)\n                )\n                :\n                setTimeout(() => {\n                  this.props.history.push('/cart');\n                }, 1000)\n            } else {\n              setTimeout(() => {\n                this.props.history.push('/home-page');\n              }, 1000)\n            }\n\n          }\n        }\n      }\n      if (apiRequestCallId === this.guestLoginApiCallId) {\n        if (responseJson && responseJson.data && responseJson.meta) {\n          this.setState({\n            ...this.state,\n            loading: false\n          });\n          localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n          localStorage.setItem('token', responseJson.meta.token);\n          //@ts-ignore\n          window.notify([{ type: 'success', message: 'Welcome to Our Store !' }])\n          this.props.history?.push('/home-page');\n        }\n      }\n      if (apiRequestCallId === this.loginAPICallID) {\n        if (responseJson && responseJson.data && responseJson.meta) {\n          this.setShowSpinner(false);\n          const { data, meta } = responseJson;\n          if (meta && meta.token) {\n            localStorage.setItem(\"token\", meta.token)\n          }\n          if (data) {\n            localStorage.setItem(\"user\", JSON.stringify(data));\n            let dat = {\n              'email': data.attributes.email,\n              'name': data.attributes.full_name\n            }\n            //@ts-ignore\n            const guestuserID = localStorage.getItem('guestUUID');\n\n            localStorage.setItem('userData', JSON.stringify(dat));\n            localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n            const GuesrUserId = localStorage.getItem('guestUUID');\n            const GuestUserData = localStorage.getItem('guestUserData');\n            if (GuestUserData && guestuserID) {\n              //@ts-ignore\n              this.props?.location?.state?.redirect === 'wishlist'\n                ?\n                setTimeout(() => {\n                  this.props.history?.push({ pathname: '/profilebio', state: { activeTab: \"wishlist\" } })\n                }, 1000)\n                :\n                // @ts-ignore\n                this.routeToAll(\"/cart\");\n            }\n            else {\n              //@ts-ignore\n              window.notify([{ type: 'success', message: meta?.message }])\n              // @ts-ignore\n              this.routeToAll(\"/home-page\");\n            }\n          }\n        }\n        if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n          console.log(\"fgbfdgbb\", responseJson.errors[0])\n          this.setShowSpinner(false);\n          // @ts-ignore\n          window.notify([{ message: responseJson.errors[0].pin || \"Something went wrong!!!\", type: \"danger\" }]);\n        }\n      }\n    }\n    else {\n\n    }\n    // Customizable Area End\n  }\n\n  logInWithFaceBook() {\n    console.log(\"logInWithFaceBook\")\n  }\n\n  logInWithGoogle() {\n    console.log(\"logInWithGoogle\")\n  }\n\n  routeToAll(route: string) {\n    this.props.history.push(route)\n  }\n\n  showPassword = (e: any) => {\n    e.preventDefault();\n    this.setState(prevState => ({\n      showPass: !prevState.showPass\n    }));\n  };\n\n  setShowSpinner = (value: boolean) => {\n    this.setState({ showSpinner: value })\n  }\n\n  //registartion through social Login\n  verifyEmailBeforeRegistartion = (resultData: any, socialMediaName: string) => {\n    //@ts-ignore\n    const guestuserID = localStorage.getItem('guestUUID');\n    let requestBody;\n    const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n    this.verfiySocialLoginApiCallId = requestMessage.messageId;\n    requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (guestuserID) {\n      requestBody = {\n        \"uuid\": guestuserID,\n        \"data\": {\n          \"type\": \"social_account\",\n          \"attributes\": {\n            \"provider\": socialMediaName,\n            \"access_token\": resultData.credential && resultData.credential.accessToken,\n\n          }\n        }\n      };\n    } else {\n      requestBody = {\n        \"data\": {\n          \"type\": \"social_account\",\n          \"attributes\": {\n            \"provider\": socialMediaName,\n            \"access_token\": resultData.credential && resultData.credential.accessToken\n          }\n        }\n      };\n    }\n\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n\n  //guest user login\n  guestLogin = () => {\n    this.setState({\n      ...this.state,\n      loading: true\n    });\n\n    const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n    this.guestLoginApiCallId = requestMessage.messageId;\n    requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const generateID = uuid();\n    console.log(\"&&&&&&&&\", generateID);\n    localStorage.setItem('guestUUID', generateID);\n    const requestBody = {\n      \"data\": {\n        \"type\": \"guest_account\",\n        \"attributes\": {\n          \"uuid\": generateID\n        }\n      }\n    };\n\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  };\n\n  //Login Form\n  handleSubmitLogin = (data: any) => {\n    const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n    this.loginAPICallID = requestMessage.messageId;\n    requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiCallEndPoint);\n\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n    requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n  }\n}"]},"metadata":{},"sourceType":"module"}