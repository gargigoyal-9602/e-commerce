{"ast":null,"code":"import _toConsumableArray from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n// @ts-nocheck\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nexport var configJSON = require(\"./config\"); //@ts-ignore\n\nimport content from \"../../../components/src/content.js\";\n\nvar FilteritemsController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(FilteritemsController, _BlockComponent);\n\n  var _super = _createSuper(FilteritemsController);\n\n  function FilteritemsController(props) {\n    var _this;\n\n    _classCallCheck(this, FilteritemsController);\n\n    _this = _super.call(this, props);\n    _this.getProductApiCallId = void 0;\n    _this.applyFilterApiCallId = void 0;\n    _this.addToWishlistApiCallId = void 0;\n    _this.removeFromWishlistApiCallId = void 0;\n    _this.getCartProductId = void 0;\n    _this.addToCartApiCallId = void 0;\n    _this.GetIsCartCreatedApiCallId = \"\";\n    _this.postCreateCartApiCallId = \"\";\n\n    _this.removeFilter = function (data, type, itemId) {\n      if (type == \"category\") {\n        Object.keys(JSON.parse(localStorage.getItem(\"subCategory\") || '{}')).length != 0 && (JSON.parse(localStorage.getItem(\"subCategory\")).cat_id == itemId ? localStorage.removeItem(\"subCategory\") : \"\");\n        var oldcategory = _this.state.filterData.category;\n\n        var removeFav = _this.state.filterData.category.filter(function (item) {\n          return item.attributes.name !== data.name;\n        });\n\n        _this.setState({\n          filterData: _objectSpread(_objectSpread({}, _this.state.filterData), {}, {\n            category: removeFav\n          })\n        }, _this.getProductList());\n\n        localStorage.removeItem(\"category\");\n        var requestCheckMessage = new Message(getName(MessageEnum.removeFilter));\n        requestCheckMessage.addData(getName(MessageEnum.removeFilterData), {\n          type: \"category\",\n          id: itemId\n        });\n        runEngine.sendMessage(requestCheckMessage.id, requestCheckMessage);\n      }\n\n      if (type == \"brand\") {\n        var _removeFav = _this.state.filterData.brand.filter(function (item) {\n          return item.attributes.name !== data.name;\n        });\n\n        _this.setState({\n          filterData: _objectSpread(_objectSpread({}, _this.state.filterData), {}, {\n            brand: _removeFav\n          })\n        }, _this.getProductList());\n\n        var _requestCheckMessage = new Message(getName(MessageEnum.removeFilter));\n\n        _requestCheckMessage.addData(getName(MessageEnum.removeFilterData), {\n          type: \"brand\",\n          id: itemId\n        });\n\n        runEngine.sendMessage(_requestCheckMessage.id, _requestCheckMessage);\n      }\n\n      if (type == \"tag\") {\n        var _removeFav2 = _this.state.filterData.tag.filter(function (item) {\n          return item.attributes.name !== data.name;\n        });\n\n        _this.setState({\n          filterData: _objectSpread(_objectSpread({}, _this.state.filterData), {}, {\n            tag: _removeFav2\n          })\n        }, _this.getProductList());\n\n        var _requestCheckMessage2 = new Message(getName(MessageEnum.removeFilter));\n\n        _requestCheckMessage2.addData(getName(MessageEnum.removeFilterData), {\n          type: \"tag\",\n          id: itemId\n        });\n\n        runEngine.sendMessage(_requestCheckMessage2.id, _requestCheckMessage2);\n      }\n    };\n\n    _this.postWishlist = function (catalogue_id) {\n      //console.log(catalogue_id, \"catalogue_id\")\n      var header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      var httpBody = {\n        \"catalogue_id\": catalogue_id\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.postWishlistApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiPostWishlist);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.exampleAPiMethod);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    _this.delWishlist = function (catalogue_id) {\n      var headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.delWishlistApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiDelWishlist + \"\".concat(catalogue_id));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.DeleteMethodType);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    _this.putItemToCart = function (cartId) {\n      var product = _this.state.productToBeAdded;\n      var header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      var httpBody = {\n        \"catalogue_id\": product.catalogue_id,\n        \"catalogue_variant_id\": product.id,\n        \"quantity\": 1\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.putItemToCartApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiPutItemsToCart + \"\".concat(cartId, \"/add_item\"));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.putAPiMethod);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    _this.getIsCartCreated = function () {\n      var headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.GetIsCartCreatedApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiGetIsCartCreated);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    _this.postCreateCart = function (product) {\n      // const product = this.state.productToBeAdded\n      var header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      var httpBody = {\n        \"catalogue_id\": product.catalogue_id,\n        \"catalogue_variant_id\": product.id,\n        \"quantity\": 1\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.postCreateCartApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiGetIsCartCreated);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(httpBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.exampleAPiMethod);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      return true;\n    };\n\n    _this.addToCart = function (product) {\n      _this.state.cartId == \"\" && _this.getIsCartCreated();\n\n      _this.setState({\n        productToBeAdded: product\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          productToBeAdded: product\n        });\n\n        _this.state.cartId != \"\" ? _this.putItemToCart(_this.state.cartId) : _this.postCreateCart(product);\n      }, 900);\n    };\n\n    _this.getProductDetails = function () {\n      _this.setState({\n        catalogue_id: window.location.pathname.slice(6)\n      });\n\n      setTimeout(function () {\n        var headers = {\n          \"Content-Type\": configJSON.productApiContentType,\n          token: localStorage.getItem(\"token\")\n        };\n        var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        _this.getProductDetailsApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.endPointApiGetProductDetails + \"\".concat(_this.state.catalogue_id));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n      }, 500);\n      return true;\n    };\n\n    _this.toSetDefaultVariant = function () {\n      var productAvailable = _this.state.productDetails && _this.state.productDetails.attributes.catalogue_variants.filter(function (item) {\n        return item.id == localStorage.getItem(\"default_variant\");\n      })[0];\n\n      _this.setState({\n        default_variant: _this.state.productDetails.attributes.stock_qty > 0 ? productAvailable : _this.state.productDetails //    currentImage : this.state.productDetails.attributes.stock_qty >0 ?  productAvailable.attributes.images.data[0].url: this.state.productDetails.attributes.images.data[0].url,\n\n      });\n\n      _this.state.productDetails.attributes.stock_qty > 0 ? _this.setState({\n        default_variant: productAvailable,\n        currentImage: _this.state.default_variant && _this.state.default_variant.attributes.images.data[0].attributes.url,\n        active_color: _this.state.default_variant && _this.state.default_variant.attributes.product_variant_properties[1].property_name,\n        active_size: _this.state.default_variant && _this.state.default_variant.attributes.product_variant_properties[0].property_name\n      }) : _this.setState({\n        default_variant: _this.state.productDetails,\n        currentImage: _this.state.productDetails.attributes.images.data[0].url,\n        catalogue_variant_id: _this.state.productDetails.attributes.id\n      });\n      var pushed_sizes = [];\n\n      var colorFilter = _this.state.productDetails.attributes.catalogue_variants.filter(function (item_available) {\n        return item_available.attributes.product_variant_properties[1].property_name == _this.state.active_color;\n      });\n\n      colorFilter.forEach(function (item) {\n        return pushed_sizes.push(item.attributes.product_variant_properties[0].property_name);\n      });\n\n      _this.setState({\n        available_sizes: pushed_sizes\n      });\n    };\n\n    _this.getProductList = function (token) {\n      _this.setState({\n        loading: true\n      });\n\n      setTimeout(function () {\n        var header = {\n          \"Content-Type\": configJSON.productApiContentType,\n          token: localStorage.getItem(\"token\")\n        };\n        var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        var urlSearch = new URLSearchParams(window.location.search);\n        var url = configJSON.sortingFilteringAPiEndPoint;\n        var newest = _this.state.newest && _this.state.newest;\n        url += \"?&page=\".concat(_this.state.page, \"&per_page=\").concat(_this.state.per_page);\n\n        if (!localStorage.getItem(\"searchQuery\") && urlSearch.get(\"q[name]\") != null) {\n          urlSearch.delete(\"q[name]\");\n\n          _this.props.history.push(\"/Filteroptions?\".concat(decodeURIComponent(urlSearch.toString())));\n        }\n\n        var cat_id = urlSearch.get(\"q[category_id][]\");\n        var sub_cat_id = urlSearch.get(\"q[sub_category_id][]\");\n        var brand_id = urlSearch.get(\"q[brand_id][]\");\n        var tag_id = urlSearch.get(\"q[tag_id][]\");\n        var color_id = urlSearch.get(\"q[color][]\");\n        var size_id = urlSearch.get(\"q[size][]\");\n        var min_price = urlSearch.get(\"q[price][from]\");\n        var max_price = urlSearch.get(\"q[price][to]\");\n        var discount = urlSearch.get(\"discounted_items\");\n        var order_by = urlSearch.get(\"sort[order_by]\");\n        var sort_by = urlSearch.get(\"sort[direction]\");\n        var search = urlSearch.get(\"q[name]\");\n\n        if (search != null) {\n          url += \"&q[name]=\" + search;\n        }\n\n        if (localStorage.getItem(\"newest\")) {\n          urlSearch.delete(\"[newArrivals]\");\n          localStorage.getItem(\"newest\") == \"By Newest\" ? _this.setState({\n            value: localStorage.getItem(\"newest\"),\n            order_by: \"created_at\",\n            sort_by: \"desc\"\n          }) : _this.setState({\n            value: localStorage.getItem(\"newest\"),\n            order_by: \"recommended\",\n            sort_by: \"desc\"\n          });\n        } //console.log(\"function working\")\n\n\n        if (cat_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[category_id][]=\" + cat_id : \"?q[category_id][]=\" + cat_id;\n        }\n\n        if (sub_cat_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[sub_category_id][]=\" + sub_cat_id : \"?q[sub_category_id][]=\" + sub_cat_id;\n        }\n\n        if (brand_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[brand_id][]=\" + brand_id : \"?q[brand_id][]=\" + brand_id;\n        }\n\n        if (tag_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[tag_id][]=\" + tag_id : \"?q[tag_id][]=\" + tag_id;\n        }\n\n        if (color_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[color][]=\" + color_id : \"?q[color][]=\" + color_id;\n        }\n\n        if (size_id != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&q[size]=\" + size_id : \"?q[size]=\" + size_id;\n        }\n\n        if (min_price != null || max_price != null) {\n          console.log(\"price working++++++++++++++++++++++\");\n          url += url.indexOf(\"?\") > -1 ? \"&q[price][from]=\" + min_price + \"&\" + \"q[price][to]=\" + max_price : '';\n        }\n\n        if (discount != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&discounted_items=\" + discount : '';\n        }\n\n        if (order_by != null || sort_by != null) {\n          var neworderby = _this.state.sortMenu.filter(function (e, index) {\n            return e.order_by == order_by;\n          })[0].label; //console.log(neworderby, \"neworderbyneworderby\")\n\n\n          _this.setState({\n            order_by: order_by,\n            sort_by: sort_by,\n            value: neworderby\n          });\n        } //if (this.state.order_by || this.state.sort_by) {\n        //this.props.history.push(`/Filteroptions?${decodeURIComponent(urlSearch.toString())}`);\n        //}\n        //setTimeout(() => {\n\n\n        if (sort_by != null && order_by != null) {\n          url += url.indexOf(\"?\") > -1 ? \"&sort[order_by]=\" + order_by + \"&sort[direction]=\" + sort_by : \"?sort[order_by]=\" + order_by + \"&sort[direction]=\" + sort_by;\n        }\n\n        _this.getProductCategoryApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), url);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(header));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeGet);\n        runEngine.sendMessage(requestMessage.id, requestMessage); //}, 1000)\n      }, 1000);\n    };\n\n    _this.removeSearchQuery = function () {\n      localStorage.removeItem(\"searchQuery\");\n\n      _this.setState({\n        searchQuery: \"\",\n        filterProducList: []\n      });\n\n      setTimeout(function () {\n        _this.getProductList();\n      }, 300);\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.SessionSaveMessage), getName(MessageEnum.SessionResponseMessage), getName(MessageEnum.FilterCheckedMessage)];\n    _this.state = _defineProperty({\n      txtInputValue: \"\",\n      txtSavedValue: \"A\",\n      enableField: false,\n      token: \"\",\n      data: \"\",\n      productList: [],\n      showSortByModal: false,\n      isShowError: false,\n      isSortByEnabled: false,\n      filterSelection: [{\n        isSelected: false\n      }, {\n        isSelected: false\n      }, {\n        isSelected: false\n      }, {\n        isSelected: false\n      }],\n      filterQueryParams: \"\",\n      lastFilterQuery: \"\",\n      noProductFound: false,\n      customErrorModal: false,\n      customErrorMessage: \"\",\n      isFetching: false,\n      screenName: \"\",\n      cartProduct: null,\n      cartLength: 0,\n      filterData: {\n        brand: [],\n        color: [],\n        tag: [],\n        category: [],\n        price: []\n      },\n      filterProducList: [],\n      sort_by: \"\",\n      order_by: \"\",\n      order_field: \"\",\n      sortMenu: [{\n        label: content.AllProduct,\n        order_by: \"\",\n        direction: \"\"\n      }, {\n        label: content.LowtoHigh,\n        order_by: \"price\",\n        direction: \"asc\"\n      }, {\n        label: content.HightoLow,\n        order_by: \"price\",\n        direction: \"desc\"\n      }, {\n        label: content.ByPopularity,\n        order_by: \"sold\",\n        direction: 'desc'\n      }, {\n        label: content.ByNewest,\n        order_by: \"created_at\",\n        direction: 'desc'\n      }, {\n        label: content.Recommended,\n        order_by: \"recommended\",\n        direction: \"desc\"\n      }],\n      dropdownOpen: false,\n      value: \"All Product\",\n      page: 1,\n      per_page: 15,\n      cartId: \"\",\n      productToBeAdded: \"\",\n      newest: localStorage.getItem(\"newest\"),\n      searchQuery: localStorage.getItem(\"searchQuery\"),\n      loading: false,\n      loadMoreShow: '',\n      prevUrl: \"\",\n      Url: \"\",\n      qParams: new URLSearchParams(window.location.search)\n    }, \"loading\", false); // Customizable Area End\n\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(FilteritemsController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Object.keys(JSON.parse(localStorage.getItem(\"subCategory\") || '{}')).length == 0 && this.getProductList();\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      this.setState({\n        searchQuery: localStorage.getItem(\"searchQuery\"),\n        newest: localStorage.getItem(\"newest\"),\n        filterProducList: []\n      });\n\n      if (!isEmpty(localStorage.getItem(\"searchQuery\")) || !isEmpty(localStorage.getItem(\"newest\"))) {\n        setTimeout(function () {\n          _this2.getProductList();\n        }, 300);\n      } //let urlSearch = new URLSearchParams(window.location.search);\n      // if (urlSearch.get(\"[newArrivals]\") == \"true\") {\n      //   this.setState({\n      //     filterProducList: []\n      //   })\n      //   urlSearch.delete(\"[newArrivals]\")\n      //   this.props.history.push(`/Filteroptions?${decodeURIComponent(urlSearch.toString())}`);\n      //   console.log(\"product will recieve working\")\n      // }\n\n    }\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(from, message) {\n        var _this3 = this;\n\n        var FilterData, apiRequestCallId, responseJson, errorReponse, array, _this$state2, productData, wishlist_length, _wishlist_length, cart_length, _responseJson$data, _responseJson$data$, _cart_length, errors;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setState({\n                  searchQuery: localStorage.getItem(\"searchQuery\"),\n                  newest: localStorage.getItem(\"newest\")\n                }); // Customizable Area Start\n\n                if (getName(MessageEnum.FilterCheckedMessage) === message.id) {\n                  FilterData = message.getData(getName(MessageEnum.FilterCheckedMessageData));\n                  this.setState({\n                    filterData: FilterData,\n                    page: 1,\n                    filterProducList: []\n                  }, function () {\n                    return _this3.getProductList();\n                  });\n                } else if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n                  apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                  responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                  errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                  if (responseJson) {\n                    if (apiRequestCallId === this.getProductApiCallId) {\n                      array = responseJson.data;\n                      this.setState({\n                        productList: responseJson.data.catalogue.data,\n                        noProductFound: false,\n                        isFetching: false\n                      }); // this.setState({productList:array})\n                    }\n\n                    if (apiRequestCallId === this.getProductCategoryApiCallId) {\n                      productData = responseJson.data;\n                      productData && productData.length == 15 ? this.setState({\n                        loadMoreShow: true\n                      }) : this.setState({\n                        loadMoreShow: false\n                      }); //this.state.Url && this.props.history.push(`/FilterOptions?${this.state.Url}`);\n                      // this.setState({\n                      //   loading :false\n                      // })\n\n                      if (responseJson) {\n                        this.setState({\n                          loading: false\n                        });\n                      } else {\n                        this.setState({\n                          loading: true\n                        });\n                      }\n\n                      productData && this.setState({\n                        filterProducList: [].concat(_toConsumableArray((_this$state2 = this.state) === null || _this$state2 === void 0 ? void 0 : _this$state2.filterProducList), _toConsumableArray(productData))\n                      });\n                    } // if (apiRequestCallId === this.putItemToCartApiCallId) {\n                    //     window.notify([{ message: 'Item added in cart successfully' , type: \"success\" }]);\n                    //     window.location.pathname ===\"/home-page\" ?  \"\": this.state.catalogue_id && this.getProductList()   \n                    // }\n                    //create wishlist \n\n\n                    if (apiRequestCallId === this.postWishlistApiCallId) {\n                      this.setState({\n                        filterProducList: []\n                      });\n                      window.notify([{\n                        message: responseJson.message,\n                        type: \"success\"\n                      }]); // @ts-ignore\n\n                      wishlist_length = parseInt(localStorage.getItem(\"wishlist_len\")); // @ts-ignore\n\n                      localStorage.setItem(\"wishlist_len\", wishlist_length + 1);\n                      this.getProductList();\n                      window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList();\n                    } //delete wishlist \n\n\n                    if (apiRequestCallId === this.delWishlistApiCallId) {\n                      this.setState({\n                        filterProducList: []\n                      });\n                      window.notify([{\n                        message: responseJson.message,\n                        type: \"success\"\n                      }]);\n                      this.getProductList(); // @ts-ignore\n\n                      _wishlist_length = parseInt(localStorage.getItem(\"wishlist_len\")); // @ts-ignore\n\n                      localStorage.setItem(\"wishlist_len\", _wishlist_length - 1);\n                      window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList();\n                    } //product details\n\n\n                    if (apiRequestCallId === this.getProductDetailsApiCallId) {\n                      //console.log(responseJson.data, \"product details\")\n                      this.setState({\n                        productDetails: responseJson.data,\n                        itemQuantity: 1\n                      });\n                      this.toSetDefaultVariant();\n                    } // add items to the cart\n\n\n                    if (apiRequestCallId === this.putItemToCartApiCallId) {\n                      if (!responseJson.errors) {\n                        // console.log(responseJson, \"add items to the cart\");\n                        window.notify([{\n                          message: \"Item added in cart successfully\",\n                          type: \"success\"\n                        }]);\n                        this.setState({\n                          filterProducList: []\n                        }); // @ts-ignore\n\n                        cart_length = parseInt(localStorage.getItem(\"cart_length\")); // @ts-ignore\n\n                        this.getProductList();\n                        localStorage.setItem(\"cart_length\", cart_length + 1);\n                        window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList();\n                      }\n\n                      if (responseJson === null || responseJson === void 0 ? void 0 : responseJson.errors) {\n                        window.notify([{\n                          message: responseJson.errors[0].order,\n                          type: \"error\"\n                        }]);\n                      }\n                    } // add to cart \n                    //is cart created || checking\n\n\n                    if (apiRequestCallId === this.GetIsCartCreatedApiCallId) {\n                      //console.log(responseJson, \"is cart created\")\n                      (responseJson === null || responseJson === void 0 ? void 0 : responseJson.data) && (responseJson === null || responseJson === void 0 ? void 0 : (_responseJson$data = responseJson.data) === null || _responseJson$data === void 0 ? void 0 : _responseJson$data.length) > 0 && this.setState({\n                        cartId: responseJson === null || responseJson === void 0 ? void 0 : (_responseJson$data$ = responseJson.data[0]) === null || _responseJson$data$ === void 0 ? void 0 : _responseJson$data$.id\n                      });\n                    } /// creating cart\n\n\n                    if (apiRequestCallId === this.postCreateCartApiCallId) {\n                      //console.log(responseJson, \" cart created\")\n                      if (responseJson === null || responseJson === void 0 ? void 0 : responseJson.data) {\n                        //@ts-ignore\n                        window.notify([{\n                          message: \"Item added in cart successfully\",\n                          type: \"success\"\n                        }]);\n                        this.setState({\n                          filterProducList: []\n                        }); // @ts-ignore\n\n                        _cart_length = parseInt(localStorage.getItem(\"cart_length\")); // @ts-ignore\n\n                        this.getProductList();\n                        localStorage.setItem(\"cart_length\", 1); //this.getIsCartCreated();\n                        // this.getProductDetails();\n                      }\n\n                      if (responseJson === null || responseJson === void 0 ? void 0 : responseJson.errors) {\n                        window.notify([{\n                          message: responseJson.errors[0].order,\n                          type: \"error\"\n                        }]);\n                      }\n                    }\n                  }\n\n                  if (responseJson === null || responseJson === void 0 ? void 0 : responseJson.errors) {\n                    errorReponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n                    errors = responseJson === null || responseJson === void 0 ? void 0 : responseJson.errors;\n                    this.parseApiCatchErrorResponse(errorReponse);\n                    errors;\n                  }\n                }\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }() // add to wishlist \n    // Customizable Area Start\n    // Customizable Area End\n\n  }]);\n\n  return FilteritemsController;\n}(BlockComponent);\n\nexport { FilteritemsController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/filteritems/src/FilterProductController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","isEmpty","runEngine","configJSON","require","content","FilteritemsController","props","getProductApiCallId","applyFilterApiCallId","addToWishlistApiCallId","removeFromWishlistApiCallId","getCartProductId","addToCartApiCallId","GetIsCartCreatedApiCallId","postCreateCartApiCallId","removeFilter","data","type","itemId","Object","keys","JSON","parse","localStorage","getItem","length","cat_id","removeItem","oldcategory","state","filterData","category","removeFav","filter","item","attributes","name","setState","getProductList","requestCheckMessage","addData","removeFilterData","id","sendMessage","brand","tag","postWishlist","catalogue_id","header","productApiContentType","token","httpBody","requestMessage","RestAPIRequestMessage","postWishlistApiCallId","messageId","RestAPIResponceEndPointMessage","endPointApiPostWishlist","RestAPIRequestHeaderMessage","stringify","RestAPIRequestBodyMessage","RestAPIRequestMethodMessage","exampleAPiMethod","delWishlist","headers","delWishlistApiCallId","endPointApiDelWishlist","DeleteMethodType","putItemToCart","cartId","product","productToBeAdded","putItemToCartApiCallId","endPointApiPutItemsToCart","putAPiMethod","getIsCartCreated","endPointApiGetIsCartCreated","apiMethodTypeGet","postCreateCart","addToCart","setTimeout","getProductDetails","window","location","pathname","slice","getProductDetailsApiCallId","endPointApiGetProductDetails","toSetDefaultVariant","productAvailable","productDetails","catalogue_variants","default_variant","stock_qty","currentImage","images","url","active_color","product_variant_properties","property_name","active_size","catalogue_variant_id","pushed_sizes","colorFilter","item_available","forEach","push","available_sizes","loading","urlSearch","URLSearchParams","search","sortingFilteringAPiEndPoint","newest","page","per_page","get","delete","history","decodeURIComponent","toString","sub_cat_id","brand_id","tag_id","color_id","size_id","min_price","max_price","discount","order_by","sort_by","value","indexOf","console","log","neworderby","sortMenu","e","index","label","getProductCategoryApiCallId","removeSearchQuery","searchQuery","filterProducList","receive","bind","subScribedMessages","RestAPIResponceMessage","SessionSaveMessage","SessionResponseMessage","FilterCheckedMessage","txtInputValue","txtSavedValue","enableField","productList","showSortByModal","isShowError","isSortByEnabled","filterSelection","isSelected","filterQueryParams","lastFilterQuery","noProductFound","customErrorModal","customErrorMessage","isFetching","screenName","cartProduct","cartLength","color","price","order_field","AllProduct","direction","LowtoHigh","HightoLow","ByPopularity","ByNewest","Recommended","dropdownOpen","loadMoreShow","prevUrl","Url","qParams","attachBuildingBlock","nextProps","from","message","FilterData","getData","FilterCheckedMessageData","apiRequestCallId","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorReponse","RestAPIResponceErrorMessage","array","catalogue","productData","notify","wishlist_length","parseInt","setItem","itemQuantity","errors","cart_length","order","parseApiCatchErrorResponse"],"mappings":"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","sourcesContent":["// @ts-nocheck\nimport { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, {\n  getName\n} from \"../../../framework/src/Messages/MessageEnum\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport StorageProvider from '../../../framework/src/StorageProvider';\n\nexport const configJSON = require(\"./config\");\n//@ts-ignore\nimport content from \"../../../components/src/content.js\"\n\n\nexport interface Props {\n  navigation: any;\n  id: string;\n  // Customizable Area Start\n  // Customizable Area End\n}\n\ninterface S {\n  // Customizable Area Start\n  txtInputValue: string;\n  txtSavedValue: string;\n  enableField: boolean;\n  token: string;\n  data: any;\n  productList: any,\n  isSortByEnabled: boolean,\n  showSortByModal: boolean,\n  filterSelection: any,\n  filterQueryParams: string,\n  lastFilterQuery: string,\n  noProductFound: boolean,\n  customErrorModal: boolean,\n  customErrorMessage: any,\n  isFetching: boolean,\n  screenName: string;\n  cartProduct: any;\n  cartLength: number;\n  isShowError: boolean;\n  filterData: any;\n  filterProducList: any;\n  sortMenu: Array<any>;\n  dropdownOpen: boolean,\n  sort_by: string,\n  order_by: string,\n  value: string,\n  order_field: string,\n  page: any,\n  per_page: any,\n  cartId: any,\n  productToBeAdded: any,\n  searchQuery: any,\n  newest: any\n  loading: boolean,\n  loadMoreShow: any,\n  prevUrl: string\n  Url: string\n  qParams: string,\n  loading: boolean\n  // Customizable Area End\n}\n\ninterface SS {\n  id: any;\n}\n\nexport default class FilteritemsController extends BlockComponent<\n  Props,\n  S,\n  SS\n> {\n\n  getProductApiCallId: any;\n  applyFilterApiCallId: any;\n  addToWishlistApiCallId: any;\n  removeFromWishlistApiCallId: any;\n  getCartProductId: any;\n  addToCartApiCallId: any;\n  GetIsCartCreatedApiCallId: string = \"\";\n  postCreateCartApiCallId: string = \"\"\n\n  constructor(props: Props) {\n    super(props);\n    this.receive = this.receive.bind(this);\n    // Customizable Area Start\n    this.subScribedMessages = [\n      getName(MessageEnum.RestAPIResponceMessage),\n      getName(MessageEnum.SessionSaveMessage),\n      getName(MessageEnum.SessionResponseMessage),\n      getName(MessageEnum.FilterCheckedMessage),\n    ];\n\n    this.state = {\n      txtInputValue: \"\",\n      txtSavedValue: \"A\",\n      enableField: false,\n      token: \"\",\n      data: \"\",\n      productList: [],\n      showSortByModal: false,\n      isShowError: false,\n      isSortByEnabled: false,\n      filterSelection:\n        [\n          {\n            isSelected: false,\n          },\n          {\n            isSelected: false,\n          },\n          {\n            isSelected: false,\n          },\n          {\n            isSelected: false,\n          }\n        ],\n      filterQueryParams: \"\",\n      lastFilterQuery: \"\",\n      noProductFound: false,\n      customErrorModal: false,\n      customErrorMessage: \"\",\n      isFetching: false,\n      screenName: \"\",\n      cartProduct: null,\n      cartLength: 0,\n      filterData: { brand: [], color: [], tag: [], category: [], price: [] },\n      filterProducList: [],\n      sort_by: \"\",\n      order_by: \"\",\n      order_field: \"\",\n      sortMenu: [\n        { label: content.AllProduct, order_by: \"\", direction: \"\" },\n        { label: content.LowtoHigh, order_by: \"price\", direction: \"asc\" },\n        { label: content.HightoLow, order_by: \"price\", direction: \"desc\" },\n        { label: content.ByPopularity, order_by: \"sold\", direction: 'desc' },\n        { label: content.ByNewest, order_by: \"created_at\", direction: 'desc' },\n        { label: content.Recommended, order_by: \"recommended\", direction: \"desc\" },\n      ],\n      dropdownOpen: false,\n      value: \"All Product\",\n      page: 1,\n      per_page: 15,\n      cartId: \"\",\n      productToBeAdded: \"\",\n      newest: localStorage.getItem(\"newest\"),\n      searchQuery: localStorage.getItem(\"searchQuery\"),\n      loading: false,\n      loadMoreShow: '',\n      prevUrl: \"\",\n      Url: \"\",\n      qParams: new URLSearchParams(window.location.search),\n      loading: false\n    };\n    // Customizable Area End\n    runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n  }\n\n\n\n  removeFilter = (data, type, itemId) => {\n    if (type == \"category\") {\n\n      Object.keys(JSON.parse(localStorage.getItem(\"subCategory\") || '{}')).length != 0 && (\n        JSON.parse(localStorage.getItem(\"subCategory\")).cat_id == itemId ?\n          localStorage.removeItem(\"subCategory\") : \"\"\n\n      )\n      let oldcategory = this.state.filterData.category\n\n\n      const removeFav = this.state.filterData.category.filter((item) => {\n        return item.attributes.name !== data.name\n      });\n      this.setState({\n        filterData: { ...this.state.filterData, category: removeFav }\n      }, this.getProductList())\n      localStorage.removeItem(\"category\")\n      const requestCheckMessage = new Message(\n        getName(MessageEnum.removeFilter)\n      );\n      requestCheckMessage.addData(\n        getName(MessageEnum.removeFilterData),\n        { type: \"category\", id: itemId }\n      );\n\n\n      runEngine.sendMessage(requestCheckMessage.id, requestCheckMessage);\n    }\n\n    if (type == \"brand\") {\n      const removeFav = this.state.filterData.brand.filter((item) => {\n        return item.attributes.name !== data.name\n      });\n      this.setState({\n        filterData: { ...this.state.filterData, brand: removeFav }\n      }, this.getProductList())\n\n      const requestCheckMessage = new Message(\n        getName(MessageEnum.removeFilter)\n      );\n      requestCheckMessage.addData(\n        getName(MessageEnum.removeFilterData),\n        { type: \"brand\", id: itemId }\n      );\n      runEngine.sendMessage(requestCheckMessage.id, requestCheckMessage);\n    }\n\n    if (type == \"tag\") {\n      const removeFav = this.state.filterData.tag.filter((item) => {\n        return item.attributes.name !== data.name\n      });\n      this.setState({\n        filterData: { ...this.state.filterData, tag: removeFav }\n      }, this.getProductList())\n\n      const requestCheckMessage = new Message(\n        getName(MessageEnum.removeFilter)\n      );\n      requestCheckMessage.addData(\n        getName(MessageEnum.removeFilterData),\n        { type: \"tag\", id: itemId }\n      );\n      runEngine.sendMessage(requestCheckMessage.id, requestCheckMessage);\n    }\n  }\n\n  async componentDidMount() {\n    Object.keys(JSON.parse(localStorage.getItem(\"subCategory\") || '{}')).length == 0 &&\n      this.getProductList()\n  }\n\n  componentWillReceiveProps(nextProps: any) {\n    this.setState({\n      searchQuery: localStorage.getItem(\"searchQuery\"),\n      newest: localStorage.getItem(\"newest\"),\n      filterProducList: []\n    })\n    if (!isEmpty(localStorage.getItem(\"searchQuery\")) || !isEmpty(localStorage.getItem(\"newest\"))) {\n      setTimeout(() => {\n        this.getProductList();\n      }, 300)\n    }\n    //let urlSearch = new URLSearchParams(window.location.search);\n\n    // if (urlSearch.get(\"[newArrivals]\") == \"true\") {\n    //   this.setState({\n    //     filterProducList: []\n    //   })\n    //   urlSearch.delete(\"[newArrivals]\")\n    //   this.props.history.push(`/Filteroptions?${decodeURIComponent(urlSearch.toString())}`);\n    //   console.log(\"product will recieve working\")\n    // }\n\n  }\n\n\n  async receive(from: string, message: Message) {\n\n    this.setState({\n      searchQuery: localStorage.getItem(\"searchQuery\"),\n      newest: localStorage.getItem(\"newest\"),\n    })\n    // Customizable Area Start\n    if (getName(MessageEnum.FilterCheckedMessage) === message.id) {\n      const FilterData = message.getData(\n        getName(MessageEnum.FilterCheckedMessageData)\n      );\n      this.setState({ filterData: FilterData, page: 1, filterProducList: [] }, () => this.getProductList());\n\n\n    } else if (getName(MessageEnum.RestAPIResponceMessage) === message.id) {\n      const apiRequestCallId = message.getData(\n        getName(MessageEnum.RestAPIResponceDataMessage)\n      );\n\n      var responseJson = message.getData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage)\n      );\n\n      var errorReponse = message.getData(\n        getName(MessageEnum.RestAPIResponceErrorMessage)\n      );\n      if (responseJson) {\n        if (apiRequestCallId === this.getProductApiCallId) {\n          let array = responseJson.data;\n          this.setState({ productList: responseJson.data.catalogue.data, noProductFound: false, isFetching: false });\n          // this.setState({productList:array})\n        }\n\n        if (apiRequestCallId === this.getProductCategoryApiCallId) {\n          let productData = responseJson.data;\n          (productData && productData.length == 15) ? this.setState({ loadMoreShow: true }) : this.setState({ loadMoreShow: false })\n\n          //this.state.Url && this.props.history.push(`/FilterOptions?${this.state.Url}`);\n\n\n          // this.setState({\n          //   loading :false\n          // })\n\n          if (responseJson) {\n            this.setState({ loading: false });\n\n          } else {\n            this.setState({ loading: true });\n          }\n\n          productData && this.setState({ filterProducList: [...this.state?.filterProducList, ...productData] });\n\n\n        }\n\n        // if (apiRequestCallId === this.putItemToCartApiCallId) {\n        //     window.notify([{ message: 'Item added in cart successfully' , type: \"success\" }]);\n        //     window.location.pathname ===\"/home-page\" ?  \"\": this.state.catalogue_id && this.getProductList()   \n        // }\n\n        //create wishlist \n        if (apiRequestCallId === this.postWishlistApiCallId) {\n          this.setState({ filterProducList: [] });\n          window.notify([{ message: responseJson.message, type: \"success\" }]);\n          // @ts-ignore\n          const wishlist_length = parseInt(localStorage.getItem(\"wishlist_len\"))\n          // @ts-ignore\n          localStorage.setItem(\"wishlist_len\", wishlist_length + 1)\n          this.getProductList();\n          window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList()\n\n        }\n\n        //delete wishlist \n        if (apiRequestCallId === this.delWishlistApiCallId) {\n          this.setState({ filterProducList: [] });\n          window.notify([{ message: responseJson.message, type: \"success\" }]);\n          this.getProductList();\n          // @ts-ignore\n          const wishlist_length = parseInt(localStorage.getItem(\"wishlist_len\"))\n          // @ts-ignore\n          localStorage.setItem(\"wishlist_len\", wishlist_length - 1)\n          window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList()\n        }\n\n        //product details\n        if (apiRequestCallId === this.getProductDetailsApiCallId) {\n          //console.log(responseJson.data, \"product details\")\n          this.setState({\n            productDetails: responseJson.data,\n            itemQuantity: 1\n          })\n          this.toSetDefaultVariant();\n        }\n\n        // add items to the cart\n        if (apiRequestCallId === this.putItemToCartApiCallId) {\n          if (!responseJson.errors) {\n            // console.log(responseJson, \"add items to the cart\");\n            window.notify([{ message: \"Item added in cart successfully\", type: \"success\" }]);\n            this.setState({ filterProducList: [] });\n            // @ts-ignore\n\n            const cart_length = parseInt(localStorage.getItem(\"cart_length\"))\n\n            // @ts-ignore\n            this.getProductList()\n            localStorage.setItem(\"cart_length\", cart_length + 1)\n            window.location.pathname === \"/Filteroptions\" ? \"\" : this.state.catalogue_id && this.getProductList()\n          }\n          if (responseJson?.errors) {\n            window.notify([{ message: responseJson.errors[0].order, type: \"error\" }]);\n\n          }\n        }\n\n        // add to cart \n        //is cart created || checking\n        if (apiRequestCallId === this.GetIsCartCreatedApiCallId) {\n          //console.log(responseJson, \"is cart created\")\n          responseJson?.data && responseJson?.data?.length > 0 &&\n            this.setState({\n              cartId: responseJson?.data[0]?.id\n            })\n\n\n\n        }\n\n        /// creating cart\n        if (apiRequestCallId === this.postCreateCartApiCallId) {\n          //console.log(responseJson, \" cart created\")\n          if (responseJson?.data) {\n            //@ts-ignore\n            window.notify([{ message: \"Item added in cart successfully\", type: \"success\" }]);\n            this.setState({ filterProducList: [] });\n            // @ts-ignore\n\n            const cart_length = parseInt(localStorage.getItem(\"cart_length\"))\n\n            // @ts-ignore\n            this.getProductList()\n            localStorage.setItem(\"cart_length\", 1)\n            //this.getIsCartCreated();\n            // this.getProductDetails();\n          }\n          if (responseJson?.errors) {\n            window.notify([{ message: responseJson.errors[0].order, type: \"error\" }]);\n\n          }\n\n        }\n\n      } if (responseJson?.errors) {\n        var errorReponse = message.getData(\n          getName(MessageEnum.RestAPIResponceErrorMessage)\n        );\n\n        const errors = responseJson?.errors;\n        this.parseApiCatchErrorResponse(errorReponse);\n        (errors)\n      }\n    }\n  }\n\n  // add to wishlist \n  postWishlist = (catalogue_id: any): boolean => {\n    //console.log(catalogue_id, \"catalogue_id\")\n    const header = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: localStorage.getItem(\"token\"),\n    };\n\n    const httpBody = {\n      \"catalogue_id\": catalogue_id,\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.postWishlistApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiPostWishlist\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.exampleAPiMethod\n    );\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n    return true;\n  };\n\n  //remove wishlist \n  delWishlist = (catalogue_id: any): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: localStorage.getItem(\"token\"),\n\n    };\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.delWishlistApiCallId = requestMessage.messageId;\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiDelWishlist + `${catalogue_id}`\n    );\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.DeleteMethodType\n    );\n\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n    return true;\n  };\n\n\n  // add items into the cart\n  putItemToCart = (cartId: any): boolean => {\n    const product = this.state.productToBeAdded\n    const header = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: localStorage.getItem(\"token\"),\n\n    };\n\n    const httpBody = {\n      \"catalogue_id\": product.catalogue_id,\n      \"catalogue_variant_id\": product.id,\n      \"quantity\": 1\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.putItemToCartApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiPutItemsToCart + `${cartId}/add_item`\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.putAPiMethod\n    );\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n    return true;\n  };\n\n\n  // add to cart \n  //is cart created || checking\n  getIsCartCreated = (): boolean => {\n    const headers = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: localStorage.getItem(\"token\"),\n    };\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.GetIsCartCreatedApiCallId = requestMessage.messageId;\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiGetIsCartCreated\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(headers)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.apiMethodTypeGet\n    );\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n\n    return true;\n  };\n\n  //post create cart\n\n  postCreateCart = (product: any): boolean => {\n    // const product = this.state.productToBeAdded\n\n    const header = {\n      \"Content-Type\": configJSON.productApiContentType,\n      token: localStorage.getItem(\"token\"),\n    };\n\n    const httpBody = {\n      \"catalogue_id\": product.catalogue_id,\n      \"catalogue_variant_id\": product.id,\n      \"quantity\": 1\n\n    };\n\n\n\n    const requestMessage = new Message(\n      getName(MessageEnum.RestAPIRequestMessage)\n    );\n\n    this.postCreateCartApiCallId = requestMessage.messageId;\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIResponceEndPointMessage),\n      configJSON.endPointApiGetIsCartCreated\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestHeaderMessage),\n      JSON.stringify(header)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestBodyMessage),\n      JSON.stringify(httpBody)\n    );\n\n    requestMessage.addData(\n      getName(MessageEnum.RestAPIRequestMethodMessage),\n      configJSON.exampleAPiMethod\n    );\n    runEngine.sendMessage(requestMessage.id, requestMessage);\n    return true;\n  };\n\n\n\n  //  cart function \n  addToCart = (product: any) => {\n    this.state.cartId == \"\" && this.getIsCartCreated();\n    this.setState({\n      productToBeAdded: product\n    })\n    setTimeout(() => {\n      this.setState({\n        productToBeAdded: product\n      })\n\n      this.state.cartId != \"\" ? this.putItemToCart(this.state.cartId) : this.postCreateCart(product)\n\n    }, 900);\n\n\n  }\n\n  // get Product Details\n  getProductDetails = (): boolean => {\n    this.setState({\n      catalogue_id: window.location.pathname.slice(6)\n    })\n    setTimeout(() => {\n      const headers = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\"),\n      };\n\n      const requestMessage = new Message(\n        getName(MessageEnum.RestAPIRequestMessage)\n      );\n\n      this.getProductDetailsApiCallId = requestMessage.messageId;\n\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIResponceEndPointMessage),\n        configJSON.endPointApiGetProductDetails + `${this.state.catalogue_id}`\n      );\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIRequestHeaderMessage),\n        JSON.stringify(headers)\n      );\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIRequestMethodMessage),\n        configJSON.apiMethodTypeGet\n      );\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    }, 500)\n    return true;\n  };\n\n  //toSetDefaultVariant\n  toSetDefaultVariant = () => {\n    const productAvailable = this.state.productDetails && this.state.productDetails.attributes.catalogue_variants.filter(\n      (item: any) => {\n        return item.id == localStorage.getItem(\"default_variant\");\n      }\n    )[0]\n\n    this.setState({\n      default_variant: this.state.productDetails.attributes.stock_qty > 0 ?\n        productAvailable : this.state.productDetails,\n      //    currentImage : this.state.productDetails.attributes.stock_qty >0 ?  productAvailable.attributes.images.data[0].url: this.state.productDetails.attributes.images.data[0].url,\n\n    })\n\n    this.state.productDetails.attributes.stock_qty > 0 ? this.setState({\n      default_variant: productAvailable,\n      currentImage: this.state.default_variant && this.state.default_variant.attributes.images.data[0].attributes.url,\n      active_color: this.state.default_variant && this.state.default_variant.attributes.product_variant_properties[1].property_name,\n      active_size: this.state.default_variant && this.state.default_variant.attributes.product_variant_properties[0].property_name\n    }) : this.setState({\n      default_variant: this.state.productDetails,\n      currentImage: this.state.productDetails.attributes.images.data[0].url,\n      catalogue_variant_id: this.state.productDetails.attributes.id\n\n    })\n    const pushed_sizes: any = []\n    const colorFilter = this.state.productDetails.attributes.catalogue_variants.filter((item_available: any) => {\n      return item_available.attributes.product_variant_properties[1].property_name == this.state.active_color\n    })\n    colorFilter.forEach((item: any) => {\n      return pushed_sizes.push(item.attributes.product_variant_properties[0].property_name)\n    })\n    this.setState({\n      available_sizes: pushed_sizes\n    })\n  }\n\n\n  getProductList = (token: any) => {\n\n    this.setState({\n      loading: true\n    })\n    setTimeout(() => {\n\n      const header = {\n        \"Content-Type\": configJSON.productApiContentType,\n        token: localStorage.getItem(\"token\")\n      };\n      const requestMessage = new Message(\n        getName(MessageEnum.RestAPIRequestMessage)\n      );\n      let urlSearch = new URLSearchParams(window.location.search);\n      let url = configJSON.sortingFilteringAPiEndPoint;\n\n      const newest = this.state.newest && this.state.newest;\n\n\n      url += `?&page=${this.state.page}&per_page=${this.state.per_page}`;\n\n      if (!localStorage.getItem(\"searchQuery\") && urlSearch.get(\"q[name]\") != null) {\n        urlSearch.delete(\"q[name]\")\n        this.props.history.push(`/Filteroptions?${decodeURIComponent(urlSearch.toString())}`);\n      }\n\n\n\n\n      const cat_id = urlSearch.get(\"q[category_id][]\");\n      const sub_cat_id = urlSearch.get(\"q[sub_category_id][]\");\n      const brand_id = urlSearch.get(\"q[brand_id][]\");\n      const tag_id = urlSearch.get(\"q[tag_id][]\");\n      const color_id = urlSearch.get(\"q[color][]\");\n      const size_id = urlSearch.get(\"q[size][]\");\n      const min_price = urlSearch.get(\"q[price][from]\");\n      const max_price = urlSearch.get(\"q[price][to]\");\n      const discount = urlSearch.get(\"discounted_items\");\n      const order_by = urlSearch.get(\"sort[order_by]\");\n      const sort_by = urlSearch.get(\"sort[direction]\");\n      const search = urlSearch.get(\"q[name]\");\n\n\n      if (search != null) {\n        url += \"&q[name]=\" + search\n      }\n      if (localStorage.getItem(\"newest\")) {\n        urlSearch.delete(\"[newArrivals]\");\n        localStorage.getItem(\"newest\") == \"By Newest\" ? (\n          this.setState({\n            value: localStorage.getItem(\"newest\"),\n            order_by: \"created_at\",\n            sort_by: \"desc\",\n          })\n        ) : this.setState({\n          value: localStorage.getItem(\"newest\"),\n          order_by: \"recommended\",\n          sort_by: \"desc\",\n        })\n\n      }\n      //console.log(\"function working\")\n      if (cat_id != null) {\n\n        url += url.indexOf(\"?\") > -1 ? \"&q[category_id][]=\" + cat_id : \"?q[category_id][]=\" + cat_id\n      }\n      if (sub_cat_id != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&q[sub_category_id][]=\" + sub_cat_id : \"?q[sub_category_id][]=\" + sub_cat_id\n      }\n      if (brand_id != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&q[brand_id][]=\" + brand_id : \"?q[brand_id][]=\" + brand_id\n      }\n      if (tag_id != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&q[tag_id][]=\" + tag_id : \"?q[tag_id][]=\" + tag_id\n      }\n\n      if (color_id != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&q[color][]=\" + color_id : \"?q[color][]=\" + color_id\n      }\n      if (size_id != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&q[size]=\" + size_id : \"?q[size]=\" + size_id\n      }\n\n      if (min_price != null || max_price != null) {\n        console.log(\"price working++++++++++++++++++++++\")\n        url += url.indexOf(\"?\") > -1 ? \"&q[price][from]=\" + min_price + \"&\" + \"q[price][to]=\" + max_price : ''\n      }\n      if (discount != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&discounted_items=\" + discount\n          : ''\n      }\n\n      if (order_by != null || sort_by != null) {\n        const neworderby = this.state.sortMenu.filter((e, index) => {\n          return e.order_by == order_by\n        })[0].label\n        //console.log(neworderby, \"neworderbyneworderby\")\n        this.setState({\n          order_by: order_by,\n          sort_by: sort_by,\n          value: neworderby\n\n        })\n\n      }\n\n\n\n\n      //if (this.state.order_by || this.state.sort_by) {\n      //this.props.history.push(`/Filteroptions?${decodeURIComponent(urlSearch.toString())}`);\n      //}\n\n\n      //setTimeout(() => {\n\n      if (sort_by != null && order_by != null) {\n        url += url.indexOf(\"?\") > -1 ? \"&sort[order_by]=\" + order_by + \"&sort[direction]=\" + sort_by\n          : \"?sort[order_by]=\" + order_by + \"&sort[direction]=\" + sort_by\n      }\n\n\n\n      this.getProductCategoryApiCallId = requestMessage.messageId;\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIResponceEndPointMessage),\n        url\n      );\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIRequestHeaderMessage),\n        JSON.stringify(header)\n      );\n      requestMessage.addData(\n        getName(MessageEnum.RestAPIRequestMethodMessage),\n        configJSON.apiMethodTypeGet\n      );\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n      //}, 1000)\n    }, 1000)\n\n  }\n\n\n  // remove search\n  removeSearchQuery = () => {\n    localStorage.removeItem(\"searchQuery\")\n    this.setState({\n      searchQuery: \"\",\n      filterProducList: []\n    })\n    setTimeout(() => {\n\n      this.getProductList()\n\n    }, 300)\n\n  }\n\n\n\n  // Customizable Area Start\n  // Customizable Area End\n}"]},"metadata":{},"sourceType":"module"}