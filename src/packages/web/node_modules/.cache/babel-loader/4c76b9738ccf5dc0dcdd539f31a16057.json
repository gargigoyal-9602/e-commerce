{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4'; // Customizable Area Start\n// Customizable Area End\n\nexport var configJSON = require(\"./config\");\n\nvar EmailAccountLoginController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(EmailAccountLoginController, _BlockComponent);\n\n  var _super = _createSuper(EmailAccountLoginController);\n\n  // Customizable Area Start\n  // Customizable Area End\n  function EmailAccountLoginController(props) {\n    var _this;\n\n    _classCallCheck(this, EmailAccountLoginController);\n\n    _this = _super.call(this, props);\n    _this.apiEmailLoginCallId = \"\";\n    _this.validationApiCallId = \"\";\n    _this.emailReg = void 0;\n    _this.labelTitle = \"\";\n    _this.verfiySocialLoginApiCallId = void 0;\n    _this.guestLoginApiCallId = void 0;\n    _this.loginAPICallID = void 0;\n    _this.helpCenterCallId = void 0;\n\n    _this.showPassword = function (e) {\n      e.preventDefault();\n\n      _this.setState(function (prevState) {\n        return {\n          showPass: !prevState.showPass\n        };\n      });\n    };\n\n    _this.setShowSpinner = function (value) {\n      _this.setState({\n        showSpinner: value\n      });\n    };\n\n    _this.verifyEmailBeforeRegistartion = function (resultData, socialMediaName) {\n      //@ts-ignore\n      var guestuserID = localStorage.getItem('guestUUID');\n      var requestBody;\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.verfiySocialLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n\n      if (guestuserID) {\n        requestBody = {\n          \"uuid\": guestuserID,\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      } else {\n        requestBody = {\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      }\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.guestLogin = function () {\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        loading: true\n      }));\n\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.guestLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var generateID = uuid();\n      console.log(\"&&&&&&&&\", generateID);\n      localStorage.setItem('guestUUID', generateID);\n      var requestBody = {\n        \"data\": {\n          \"type\": \"guest_account\",\n          \"attributes\": {\n            \"uuid\": generateID\n          }\n        }\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.handleSubmitLogin = function (data) {\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.loginAPICallID = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.getHelpCenter = function () {\n      var token = localStorage.getItem(\"token\");\n      var headers = {\n        token: token,\n        \"Content-Type\": \"application/json\"\n      };\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.helpCenterCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.getHelpCenterAPIEndPoint);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.validationApiMethodType); // Sending Request to call API.\n\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.CountryCodeMessage), getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.ReciveUserCredentials)];\n    _this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false\n    };\n    _this.emailReg = new RegExp(\"\");\n    _this.labelTitle = configJSON.labelTitle; // Customizable Area End\n\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(EmailAccountLoginController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isNewUserToken, isNewUserData, _this$props$location, _this$props$location$, _this$props, _this$props$history;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.scrollTo(0, 0);\n                this.getHelpCenter();\n                this.send(new Message(getName(MessageEnum.RequestUserCredentials))); // Customizable Area Start\n                //@ts-ignore\n\n                isNewUserToken = localStorage.getItem('SignUPtoken');\n                isNewUserData = localStorage.getItem('signUpUser');\n\n                if (isNewUserData && isNewUserToken) {\n                  localStorage.clear();\n                } else {\n                  //@ts-ignore\n                  if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && ((_this$props$location = this.props.location) === null || _this$props$location === void 0 ? void 0 : (_this$props$location$ = _this$props$location.state) === null || _this$props$location$ === void 0 ? void 0 : _this$props$location$.calledFrom) !== \"guest-login\") {\n                    (_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$history = _this$props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history.push('/home-page');\n                  }\n                } // Customizable Area End\n\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() // Customizable Area Start\n\n  }, {\n    key: \"verifyGuestToken\",\n    value: function () {\n      var _verifyGuestToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                token = window.localStorage.getItem(\"token\");\n                return _context2.abrupt(\"return\", token === null || token === void 0 ? void 0 : token.length);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function verifyGuestToken() {\n        return _verifyGuestToken.apply(this, arguments);\n      }\n\n      return verifyGuestToken;\n    }() // Customizable Area End\n\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(from, message) {\n        var _this2 = this;\n\n        var apiRequestCallId, responseJson, errorResponse, _this$state$socialMed, user, credential, additionalUserInfo, dat, guestId, _this$props$location2, _this$props$location3, _this$props$history2, data, meta, _dat, guestuserID, GuesrUserId, GuestUserData, _this$props2, _this$props2$location, _this$props2$location2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // Customizable Area Start\n                runEngine.debugLog('Message Received', message);\n\n                if (!(message.id === getName(MessageEnum.RestAPIResponceMessage))) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                if (!(apiRequestCallId === this.verfiySocialLoginApiCallId)) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!responseJson) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!this.state.socialMediaResult) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                _this$state$socialMed = this.state.socialMediaResult, user = _this$state$socialMed.user, credential = _this$state$socialMed.credential, additionalUserInfo = _this$state$socialMed.additionalUserInfo;\n                dat = {\n                  'email': user.email,\n                  'name': user.displayName\n                };\n                console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                _context3.next = 13;\n                return localStorage.setItem('user', JSON.stringify(responseJson.data));\n\n              case 13:\n                _context3.next = 15;\n                return localStorage.setItem('token', responseJson.meta.token);\n\n              case 15:\n                _context3.next = 17;\n                return localStorage.setItem('profileImage', user.photoURL);\n\n              case 17:\n                _context3.next = 19;\n                return localStorage.setItem('userData', JSON.stringify(dat));\n\n              case 19:\n                guestId = localStorage.getItem('guestUUID');\n\n                if (guestId) {\n                  //@ts-ignore\n                  ((_this$props$location2 = this.props.location) === null || _this$props$location2 === void 0 ? void 0 : (_this$props$location3 = _this$props$location2.state) === null || _this$props$location3 === void 0 ? void 0 : _this$props$location3.redirect) === \"wishlist\" ? setTimeout(function () {\n                    _this2.props.history.push({\n                      pathname: \"/profilebio\",\n                      state: {\n                        activeTab: \"wishlist\"\n                      }\n                    });\n                  }, 1000) : setTimeout(function () {\n                    _this2.props.history.push('/cart');\n                  }, 1000);\n                } else {\n                  setTimeout(function () {\n                    _this2.props.history.push('/home-page');\n                  }, 1000);\n                }\n\n              case 21:\n                if (apiRequestCallId === this.guestLoginApiCallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                      loading: false\n                    }));\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token); //@ts-ignore\n\n                    window.notify([{\n                      type: 'success',\n                      message: 'Welcome to Our Store !'\n                    }]);\n                    (_this$props$history2 = this.props.history) === null || _this$props$history2 === void 0 ? void 0 : _this$props$history2.push('/home-page');\n                  }\n                }\n\n                if (apiRequestCallId === this.loginAPICallID) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    data = responseJson.data, meta = responseJson.meta;\n\n                    if (meta && meta.token) {\n                      localStorage.setItem(\"token\", meta.token);\n                    }\n\n                    if (data) {\n                      localStorage.setItem(\"user\", JSON.stringify(data));\n                      _dat = {\n                        'email': data.attributes.email,\n                        'name': data.attributes.full_name\n                      }; //@ts-ignore\n\n                      guestuserID = localStorage.getItem('guestUUID');\n                      localStorage.setItem('userData', JSON.stringify(_dat));\n                      localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                      GuesrUserId = localStorage.getItem('guestUUID');\n                      GuestUserData = localStorage.getItem('guestUserData');\n\n                      if (GuestUserData && guestuserID) {\n                        //@ts-ignore\n                        ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$location = _this$props2.location) === null || _this$props2$location === void 0 ? void 0 : (_this$props2$location2 = _this$props2$location.state) === null || _this$props2$location2 === void 0 ? void 0 : _this$props2$location2.redirect) === 'wishlist' ? setTimeout(function () {\n                          var _this2$props$history;\n\n                          (_this2$props$history = _this2.props.history) === null || _this2$props$history === void 0 ? void 0 : _this2$props$history.push({\n                            pathname: '/profilebio',\n                            state: {\n                              activeTab: \"wishlist\"\n                            }\n                          });\n                        }, 1000) : // @ts-ignore\n                        this.routeToAll(\"/cart\");\n                      } else {\n                        //@ts-ignore\n                        window.notify([{\n                          type: 'success',\n                          message: meta === null || meta === void 0 ? void 0 : meta.message\n                        }]); // @ts-ignore\n\n                        this.routeToAll(\"/home-page\");\n                      }\n                    }\n                  }\n\n                  if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0]);\n                    this.setShowSpinner(false); // @ts-ignore\n\n                    window.notify([{\n                      message: responseJson.errors[0].pin || \"Something went wrong!!!\",\n                      type: \"danger\"\n                    }]);\n                  }\n                }\n\n                if (this.helpCenterCallId === apiRequestCallId) {\n                  if (responseJson && responseJson.data && responseJson.data.length > 0) {\n                    this.setState({\n                      helpCenterData: responseJson.data\n                    });\n                  }\n                }\n\n                _context3.next = 26;\n                break;\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }()\n  }, {\n    key: \"logInWithFaceBook\",\n    value: function logInWithFaceBook() {\n      console.log(\"logInWithFaceBook\");\n    }\n  }, {\n    key: \"logInWithGoogle\",\n    value: function logInWithGoogle() {\n      console.log(\"logInWithGoogle\");\n    }\n  }, {\n    key: \"routeToAll\",\n    value: function routeToAll(route) {\n      this.props.history.push(route);\n    }\n  }]);\n\n  return EmailAccountLoginController;\n}(BlockComponent);\n\nexport { EmailAccountLoginController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/email-account-login/src/EmailLoginAccountController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","uuid","configJSON","require","EmailAccountLoginController","props","apiEmailLoginCallId","validationApiCallId","emailReg","labelTitle","verfiySocialLoginApiCallId","guestLoginApiCallId","loginAPICallID","helpCenterCallId","showPassword","e","preventDefault","setState","prevState","showPass","setShowSpinner","value","showSpinner","verifyEmailBeforeRegistartion","resultData","socialMediaName","guestuserID","localStorage","getItem","requestBody","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","socialRegistartionAPIEndPoint","headers","credential","accessToken","RestAPIRequestHeaderMessage","RestAPIRequestBodyMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","guestLogin","state","loading","guestLoginAPIEndPoint","generateID","console","log","setItem","handleSubmitLogin","data","loginAPiEndPoint","getHelpCenter","token","getHelpCenterAPIEndPoint","validationApiMethodType","receive","bind","subScribedMessages","CountryCodeMessage","RestAPIResponceMessage","ReciveUserCredentials","loginError","RegExp","attachBuildingBlock","window","scrollTo","send","RequestUserCredentials","isNewUserToken","isNewUserData","clear","verifyGuestToken","location","calledFrom","history","push","length","from","message","debugLog","apiRequestCallId","getData","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorResponse","RestAPIResponceErrorMessage","socialMediaResult","user","additionalUserInfo","dat","email","displayName","photoURL","meta","guestId","redirect","setTimeout","pathname","activeTab","notify","type","attributes","full_name","image_url","GuesrUserId","GuestUserData","routeToAll","errors","pin","helpCenterData","route"],"mappings":";;;;;;;;AACA,SAASA,OAAT,QAAwB,gCAAxB;AACA,SAASC,cAAT,QAA+B,uCAA/B;AACA,OAAOC,WAAP,IAAsBC,OAAtB,QAAqC,6CAArC;AACA,SAASC,SAAT,QAA0B,kCAA1B;AACA,SAASC,IAAT,QAAqB,QAArB,C,CACA;AACA;;AAEA,OAAO,IAAMC,UAAU,GAAGC,OAAO,CAAC,UAAD,CAA1B;;IA4BcC,2B;;;;;AAEjB;AASA;AAEA,uCAAYC,KAAZ,EAA0B;AAAA;;AAAA;;AAEtB,8BAAMA,KAAN;AAFsB,UAV1BC,mBAU0B,GAVI,EAUJ;AAAA,UAT1BC,mBAS0B,GATI,EASJ;AAAA,UAR1BC,QAQ0B;AAAA,UAP1BC,UAO0B,GAPL,EAOK;AAAA,UAN1BC,0BAM0B;AAAA,UAL1BC,mBAK0B;AAAA,UAJ1BC,cAI0B;AAAA,UAH1BC,gBAG0B;;AAAA,UAuL1BC,YAvL0B,GAuLX,UAACC,CAAD,EAAY;AACvBA,MAAAA,CAAC,CAACC,cAAF;;AACA,YAAKC,QAAL,CAAc,UAAAC,SAAS;AAAA,eAAK;AACxBC,UAAAA,QAAQ,EAAE,CAACD,SAAS,CAACC;AADG,SAAL;AAAA,OAAvB;AAGH,KA5LyB;;AAAA,UA8L1BC,cA9L0B,GA8LT,UAACC,KAAD,EAAoB;AACjC,YAAKJ,QAAL,CAAc;AAAEK,QAAAA,WAAW,EAAED;AAAf,OAAd;AACH,KAhMyB;;AAAA,UAmM1BE,6BAnM0B,GAmMM,UAACC,UAAD,EAAkBC,eAAlB,EAA8C;AAC1E;AACA,UAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApB;AACA,UAAIC,WAAJ;AACA,UAAMC,cAAc,GAAG,IAAIlC,OAAJ,CAAYG,OAAO,CAACD,WAAW,CAACiC,qBAAb,CAAnB,CAAvB;AAEA,YAAKrB,0BAAL,GAAkCoB,cAAc,CAACE,SAAjD;AACAF,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACoC,8BAAb,CAA9B,EAA4EhC,UAAU,CAACiC,6BAAvF;AACA,UAAMC,OAAO,GAAG;AACZ,wBAAgB;AADJ,OAAhB;;AAGA,UAAIV,WAAJ,EAAiB;AACbG,QAAAA,WAAW,GAAG;AACV,kBAAQH,WADE;AAEV,kBAAQ;AACJ,oBAAQ,gBADJ;AAEJ,0BAAc;AACV,0BAAYD,eADF;AAEV,8BAAgBD,UAAU,CAACa,UAAX,IAAyBb,UAAU,CAACa,UAAX,CAAsBC;AAFrD;AAFV;AAFE,SAAd;AAWH,OAZD,MAYO;AACHT,QAAAA,WAAW,GAAG;AACV,kBAAQ;AACJ,oBAAQ,gBADJ;AAEJ,0BAAc;AACV,0BAAYJ,eADF;AAEV,8BAAgBD,UAAU,CAACa,UAAX,IAAyBb,UAAU,CAACa,UAAX,CAAsBC;AAFrD;AAFV;AADE,SAAd;AASH;;AAEDR,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACyC,2BAAb,CAA9B,EAAyEH,OAAzE;AACAN,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC0C,yBAAb,CAA9B,EAAuEC,IAAI,CAACC,SAAL,CAAeb,WAAf,CAAvE;AACAC,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC6C,2BAAb,CAA9B,EAAyEzC,UAAU,CAAC0C,sBAApF;AAEA5C,MAAAA,SAAS,CAAC6C,WAAV,CAAsBf,cAAc,CAACgB,EAArC,EAAyChB,cAAzC;AACH,KA3OyB;;AAAA,UA8O1BiB,UA9O0B,GA8Ob,YAAM;AACf,YAAK9B,QAAL,iCACO,MAAK+B,KADZ;AAEIC,QAAAA,OAAO,EAAE;AAFb;;AAKA,UAAMnB,cAAc,GAAG,IAAIlC,OAAJ,CAAYG,OAAO,CAACD,WAAW,CAACiC,qBAAb,CAAnB,CAAvB;AAEA,YAAKpB,mBAAL,GAA2BmB,cAAc,CAACE,SAA1C;AACAF,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACoC,8BAAb,CAA9B,EAA4EhC,UAAU,CAACgD,qBAAvF;AACA,UAAMd,OAAO,GAAG;AACZ,wBAAgB;AADJ,OAAhB;AAGA,UAAMe,UAAU,GAAGlD,IAAI,EAAvB;AACAmD,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,UAAxB;AACAxB,MAAAA,YAAY,CAAC2B,OAAb,CAAqB,WAArB,EAAkCH,UAAlC;AACA,UAAMtB,WAAW,GAAG;AAChB,gBAAQ;AACJ,kBAAQ,eADJ;AAEJ,wBAAc;AACV,oBAAQsB;AADE;AAFV;AADQ,OAApB;AASArB,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACyC,2BAAb,CAA9B,EAAyEH,OAAzE;AACAN,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC0C,yBAAb,CAA9B,EAAuEC,IAAI,CAACC,SAAL,CAAeb,WAAf,CAAvE;AACAC,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC6C,2BAAb,CAA9B,EAAyEzC,UAAU,CAAC0C,sBAApF;AAEA5C,MAAAA,SAAS,CAAC6C,WAAV,CAAsBf,cAAc,CAACgB,EAArC,EAAyChB,cAAzC;AACH,KA5QyB;;AAAA,UA+Q1ByB,iBA/Q0B,GA+QN,UAACC,IAAD,EAAe;AAC/B,UAAM1B,cAAc,GAAG,IAAIlC,OAAJ,CAAYG,OAAO,CAACD,WAAW,CAACiC,qBAAb,CAAnB,CAAvB;AACA,YAAKnB,cAAL,GAAsBkB,cAAc,CAACE,SAArC;AACAF,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACoC,8BAAb,CAA9B,EAA4EhC,UAAU,CAACuD,gBAAvF;AAEA,UAAMrB,OAAO,GAAG;AACZ,wBAAgB;AADJ,OAAhB;AAGAN,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACyC,2BAAb,CAA9B,EAAyEE,IAAI,CAACC,SAAL,CAAeN,OAAf,CAAzE;AACAN,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC0C,yBAAb,CAA9B,EAAuEC,IAAI,CAACC,SAAL,CAAec,IAAf,CAAvE;AACA1B,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC6C,2BAAb,CAA9B,EAAyEzC,UAAU,CAAC0C,sBAApF;AAEA5C,MAAAA,SAAS,CAAC6C,WAAV,CAAsBf,cAAc,CAACgB,EAArC,EAAyChB,cAAzC;AACH,KA5RyB;;AAAA,UA+R1B4B,aA/R0B,GA+RV,YAAM;AAClB,UAAMC,KAAK,GAAGhC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMQ,OAAO,GAAG;AACZuB,QAAAA,KAAK,EAALA,KADY;AAEZ,wBAAgB;AAFJ,OAAhB;AAIA,UAAM7B,cAAc,GAAG,IAAIlC,OAAJ,CAAYG,OAAO,CAACD,WAAW,CAACiC,qBAAb,CAAnB,CAAvB;AACA,YAAKlB,gBAAL,GAAwBiB,cAAc,CAACE,SAAvC;AAEAF,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACoC,8BAAb,CAA9B,EAA4EhC,UAAU,CAAC0D,wBAAvF;AACA9B,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAACyC,2BAAb,CAA9B,EAAyEH,OAAzE;AACAN,MAAAA,cAAc,CAACG,OAAf,CAAuBlC,OAAO,CAACD,WAAW,CAAC6C,2BAAb,CAA9B,EAAyEzC,UAAU,CAAC2D,uBAApF,EAXkB,CAYlB;;AACA7D,MAAAA,SAAS,CAAC6C,WAAV,CAAsBf,cAAc,CAACgB,EAArC,EAAyChB,cAAzC;AACH,KA7SyB;;AAGtB,UAAKgC,OAAL,GAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CAHsB,CAItB;;AACA,UAAKC,kBAAL,GAA0B,CACtBjE,OAAO,CAACD,WAAW,CAACmE,kBAAb,CADe,EAEtBlE,OAAO,CAACD,WAAW,CAACoE,sBAAb,CAFe,EAGtBnE,OAAO,CAACD,WAAW,CAACqE,qBAAb,CAHe,CAA1B;AAMA,UAAKnB,KAAL,GAAa;AACT1B,MAAAA,WAAW,EAAE,KADJ;AAET8C,MAAAA,UAAU,EAAE,EAFH;AAGTjD,MAAAA,QAAQ,EAAE;AAHD,KAAb;AAMA,UAAKX,QAAL,GAAgB,IAAI6D,MAAJ,CAAW,EAAX,CAAhB;AACA,UAAK5D,UAAL,GAAkBP,UAAU,CAACO,UAA7B,CAlBsB,CAmBtB;;AAEAT,IAAAA,SAAS,CAACsE,mBAAV,gCAA8C,MAAKN,kBAAnD;AArBsB;AAuBzB;;;;;wFAED;AAAA;;AAAA;AAAA;AAAA;AAAA;AACIO,gBAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,qBAAKd,aAAL;AACA,qBAAKe,IAAL,CAAU,IAAI7E,OAAJ,CAAYG,OAAO,CAACD,WAAW,CAAC4E,sBAAb,CAAnB,CAAV,EAHJ,CAII;AAEA;;AACMC,gBAAAA,cAPV,GAO2BhD,YAAY,CAACC,OAAb,CAAqB,aAArB,CAP3B;AAQUgD,gBAAAA,aARV,GAQ0BjD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAR1B;;AASI,oBAAIgD,aAAa,IAAID,cAArB,EAAqC;AACjChD,kBAAAA,YAAY,CAACkD,KAAb;AACH,iBAFD,MAEO;AACH;AACA,sBAAIN,MAAM,CAAC5C,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,KAA4C,KAAKkD,gBAAL,EAA5C,IAAuE,8BAAKzE,KAAL,CAAW0E,QAAX,uGAAqB/B,KAArB,gFAA4BgC,UAA5B,MAA2C,aAAtH,EAAqI;AACjI,wCAAK3E,KAAL,mFAAY4E,OAAZ,4EAAqBC,IAArB,CAA0B,YAA1B;AACH;AACJ,iBAhBL,CAiBI;;;AAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;QAoBA;;;;;uFACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACQvB,gBAAAA,KADR,GACgBY,MAAM,CAAC5C,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CADhB;AAAA,kDAEW+B,KAFX,aAEWA,KAFX,uBAEWA,KAAK,CAAEwB,MAFlB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;QAIA;;;;;8EAEA,kBAAcC,IAAd,EAA4BC,OAA5B;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AACI;AACArF,gBAAAA,SAAS,CAACsF,QAAV,CAAmB,kBAAnB,EAAuCD,OAAvC;;AAFJ,sBAGQA,OAAO,CAACvC,EAAR,KAAe/C,OAAO,CAACD,WAAW,CAACoE,sBAAb,CAH9B;AAAA;AAAA;AAAA;;AAIYqB,gBAAAA,gBAJZ,GAI+BF,OAAO,CAACG,OAAR,CAAgBzF,OAAO,CAACD,WAAW,CAAC2F,0BAAb,CAAvB,CAJ/B;AAKYC,gBAAAA,YALZ,GAK2BL,OAAO,CAACG,OAAR,CAAgBzF,OAAO,CAACD,WAAW,CAAC6F,6BAAb,CAAvB,CAL3B;AAMYC,gBAAAA,aANZ,GAM4BP,OAAO,CAACG,OAAR,CAAgBzF,OAAO,CAACD,WAAW,CAAC+F,2BAAb,CAAvB,CAN5B;;AAAA,sBAOYN,gBAAgB,KAAK,KAAK7E,0BAPtC;AAAA;AAAA;AAAA;;AAAA,qBAQgBgF,YARhB;AAAA;AAAA;AAAA;;AAAA,qBASoB,KAAK1C,KAAL,CAAW8C,iBAT/B;AAAA;AAAA;AAAA;;AAAA,wCAUqE,KAAK9C,KAAL,CAAW8C,iBAVhF,EAU4BC,IAV5B,yBAU4BA,IAV5B,EAUkC1D,UAVlC,yBAUkCA,UAVlC,EAU8C2D,kBAV9C,yBAU8CA,kBAV9C;AAWwBC,gBAAAA,GAXxB,GAW8B;AACN,2BAASF,IAAI,CAACG,KADR;AAEN,0BAAQH,IAAI,CAACI;AAFP,iBAX9B;AAeoB/C,gBAAAA,OAAO,CAACC,GAAR,CAAY0C,IAAI,CAACK,QAAjB,EAA2B,eAA3B,EAA4C3D,IAAI,CAACC,SAAL,CAAeuD,GAAf,CAA5C,EAAiE,YAAjE,EAA+E,KAAKjD,KAAL,CAAW8C,iBAA1F;AAfpB;AAAA,uBAgB0BnE,YAAY,CAAC2B,OAAb,CAAqB,MAArB,EAA6Bb,IAAI,CAACC,SAAL,CAAegD,YAAY,CAAClC,IAA5B,CAA7B,CAhB1B;;AAAA;AAAA;AAAA,uBAiB0B7B,YAAY,CAAC2B,OAAb,CAAqB,OAArB,EAA8BoC,YAAY,CAACW,IAAb,CAAkB1C,KAAhD,CAjB1B;;AAAA;AAAA;AAAA,uBAkB0BhC,YAAY,CAAC2B,OAAb,CAAqB,cAArB,EAAqCyC,IAAI,CAACK,QAA1C,CAlB1B;;AAAA;AAAA;AAAA,uBAmB0BzE,YAAY,CAAC2B,OAAb,CAAqB,UAArB,EAAiCb,IAAI,CAACC,SAAL,CAAeuD,GAAf,CAAjC,CAnB1B;;AAAA;AAoB0BK,gBAAAA,OApB1B,GAoBoC3E,YAAY,CAACC,OAAb,CAAqB,WAArB,CApBpC;;AAqBoB,oBAAI0E,OAAJ,EAAa;AACT;AACA,iDAAKjG,KAAL,CAAW0E,QAAX,yGAAqB/B,KAArB,gFAA4BuD,QAA5B,MAAyC,UAAzC,GAGQC,UAAU,CAAC,YAAM;AACb,oBAAA,MAAI,CAACnG,KAAL,CAAW4E,OAAX,CAAmBC,IAAnB,CAAwB;AACpBuB,sBAAAA,QAAQ,EAAE,aADU;AAEpBzD,sBAAAA,KAAK,EAAE;AAAE0D,wBAAAA,SAAS,EAAE;AAAb;AAFa,qBAAxB;AAIH,mBALS,EAKP,IALO,CAHlB,GAWIF,UAAU,CAAC,YAAM;AACb,oBAAA,MAAI,CAACnG,KAAL,CAAW4E,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH,mBAFS,EAEP,IAFO,CAXd;AAcH,iBAhBD,MAgBO;AACHsB,kBAAAA,UAAU,CAAC,YAAM;AACb,oBAAA,MAAI,CAACnG,KAAL,CAAW4E,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACH,mBAFS,EAEP,IAFO,CAAV;AAGH;;AAzCrB;AA8CQ,oBAAIK,gBAAgB,KAAK,KAAK5E,mBAA9B,EAAmD;AAC/C,sBAAI+E,YAAY,IAAIA,YAAY,CAAClC,IAA7B,IAAqCkC,YAAY,CAACW,IAAtD,EAA4D;AACxD,yBAAKpF,QAAL,iCACO,KAAK+B,KADZ;AAEIC,sBAAAA,OAAO,EAAE;AAFb;AAIAtB,oBAAAA,YAAY,CAAC2B,OAAb,CAAqB,eAArB,EAAsCb,IAAI,CAACC,SAAL,CAAegD,YAAY,CAAClC,IAA5B,CAAtC;AACA7B,oBAAAA,YAAY,CAAC2B,OAAb,CAAqB,OAArB,EAA8BoC,YAAY,CAACW,IAAb,CAAkB1C,KAAhD,EANwD,CAOxD;;AACAY,oBAAAA,MAAM,CAACoC,MAAP,CAAc,CAAC;AAAEC,sBAAAA,IAAI,EAAE,SAAR;AAAmBvB,sBAAAA,OAAO,EAAE;AAA5B,qBAAD,CAAd;AACA,iDAAKhF,KAAL,CAAW4E,OAAX,8EAAoBC,IAApB,CAAyB,YAAzB;AACH;AACJ;;AACD,oBAAIK,gBAAgB,KAAK,KAAK3E,cAA9B,EAA8C;AAC1C,sBAAI8E,YAAY,IAAIA,YAAY,CAAClC,IAA7B,IAAqCkC,YAAY,CAACW,IAAtD,EAA4D;AACxD,yBAAKjF,cAAL,CAAoB,KAApB;AACQoC,oBAAAA,IAFgD,GAEjCkC,YAFiC,CAEhDlC,IAFgD,EAE1C6C,IAF0C,GAEjCX,YAFiC,CAE1CW,IAF0C;;AAGxD,wBAAIA,IAAI,IAAIA,IAAI,CAAC1C,KAAjB,EAAwB;AACpBhC,sBAAAA,YAAY,CAAC2B,OAAb,CAAqB,OAArB,EAA8B+C,IAAI,CAAC1C,KAAnC;AACH;;AACD,wBAAIH,IAAJ,EAAU;AACN7B,sBAAAA,YAAY,CAAC2B,OAAb,CAAqB,MAArB,EAA6Bb,IAAI,CAACC,SAAL,CAAec,IAAf,CAA7B;AACIyC,sBAAAA,IAFE,GAEI;AACN,iCAASzC,IAAI,CAACqD,UAAL,CAAgBX,KADnB;AAEN,gCAAQ1C,IAAI,CAACqD,UAAL,CAAgBC;AAFlB,uBAFJ,EAMN;;AACMpF,sBAAAA,WAPA,GAOcC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAPd;AASND,sBAAAA,YAAY,CAAC2B,OAAb,CAAqB,UAArB,EAAiCb,IAAI,CAACC,SAAL,CAAeuD,IAAf,CAAjC;AACAtE,sBAAAA,YAAY,CAAC2B,OAAb,CAAqB,cAArB,EAAqCE,IAAI,CAACqD,UAAL,CAAgBE,SAAhB,IAA6BvD,IAAI,CAACqD,UAAL,CAAgBE,SAAlF;AACMC,sBAAAA,WAXA,GAWcrF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAXd;AAYAqF,sBAAAA,aAZA,GAYgBtF,YAAY,CAACC,OAAb,CAAqB,eAArB,CAZhB;;AAaN,0BAAIqF,aAAa,IAAIvF,WAArB,EAAkC;AAC9B;AACA,8CAAKrB,KAAL,uFAAY0E,QAAZ,0GAAsB/B,KAAtB,kFAA6BuD,QAA7B,MAA0C,UAA1C,GAEIC,UAAU,CAAC,YAAM;AAAA;;AACb,kDAAA,MAAI,CAACnG,KAAL,CAAW4E,OAAX,8EAAoBC,IAApB,CAAyB;AAAEuB,4BAAAA,QAAQ,EAAE,aAAZ;AAA2BzD,4BAAAA,KAAK,EAAE;AAAE0D,8BAAAA,SAAS,EAAE;AAAb;AAAlC,2BAAzB;AACH,yBAFS,EAEP,IAFO,CAFd,GAMI;AACA,6BAAKQ,UAAL,CAAgB,OAAhB,CAPJ;AAQH,uBAVD,MAWK;AACD;AACA3C,wBAAAA,MAAM,CAACoC,MAAP,CAAc,CAAC;AAAEC,0BAAAA,IAAI,EAAE,SAAR;AAAmBvB,0BAAAA,OAAO,EAAEgB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEhB;AAAlC,yBAAD,CAAd,EAFC,CAGD;;AACA,6BAAK6B,UAAL,CAAgB,YAAhB;AACH;AACJ;AACJ;;AACD,sBAAIxB,YAAY,IAAIA,YAAY,CAACyB,MAA7B,IAAuCzB,YAAY,CAACyB,MAAb,CAAoBhC,MAApB,GAA6B,CAAxE,EAA2E;AACvE/B,oBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBqC,YAAY,CAACyB,MAAb,CAAoB,CAApB,CAAxB;AACA,yBAAK/F,cAAL,CAAoB,KAApB,EAFuE,CAGvE;;AACAmD,oBAAAA,MAAM,CAACoC,MAAP,CAAc,CAAC;AAAEtB,sBAAAA,OAAO,EAAEK,YAAY,CAACyB,MAAb,CAAoB,CAApB,EAAuBC,GAAvB,IAA8B,yBAAzC;AAAoER,sBAAAA,IAAI,EAAE;AAA1E,qBAAD,CAAd;AACH;AACJ;;AACD,oBAAI,KAAK/F,gBAAL,KAA0B0E,gBAA9B,EAAgD;AAC5C,sBAAIG,YAAY,IAAIA,YAAY,CAAClC,IAA7B,IAAqCkC,YAAY,CAAClC,IAAb,CAAkB2B,MAAlB,GAA2B,CAApE,EAAuE;AACnE,yBAAKlE,QAAL,CAAc;AACVoG,sBAAAA,cAAc,EAAE3B,YAAY,CAAClC;AADnB,qBAAd;AAGH;AACJ;;AA/GT;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;WAuHA,6BAAoB;AAChBJ,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;;;WAED,2BAAkB;AACdD,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH;;;WAED,oBAAWiE,KAAX,EAA0B;AACtB,WAAKjH,KAAL,CAAW4E,OAAX,CAAmBC,IAAnB,CAAwBoC,KAAxB;AACH;;;;EAlMoDzH,c;;SAApCO,2B","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4';\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n    navigation: any;\n    id: string;\n    history: any\n    // Customizable Area Start\n    // Customizable Area End\n}\n\ninterface S {\n    // Customizable Area Start\n    showSpinner: boolean;\n    loginError: string,\n    showPass: boolean,\n\n    loading?: boolean;\n    socialMediaResult?: any;\n    helpCenterData?: any;\n    // Customizable Area End\n}\n\ninterface SS {\n    // Customizable Area Start\n    id: any;\n    // Customizable Area End\n}\n\nexport default class EmailAccountLoginController extends BlockComponent<Props, S, SS> {\n\n    // Customizable Area Start\n    apiEmailLoginCallId: string = \"\";\n    validationApiCallId: string = \"\";\n    emailReg: RegExp;\n    labelTitle: string = \"\";\n    verfiySocialLoginApiCallId: string;\n    guestLoginApiCallId: string;\n    loginAPICallID: string;\n    helpCenterCallId: string;\n    // Customizable Area End\n\n    constructor(props: Props) {\n\n        super(props);\n        this.receive = this.receive.bind(this);\n        // Customizable Area Start\n        this.subScribedMessages = [\n            getName(MessageEnum.CountryCodeMessage),\n            getName(MessageEnum.RestAPIResponceMessage),\n            getName(MessageEnum.ReciveUserCredentials)\n        ]\n\n        this.state = {\n            showSpinner: false,\n            loginError: \"\",\n            showPass: false,\n        };\n\n        this.emailReg = new RegExp(\"\");\n        this.labelTitle = configJSON.labelTitle;\n        // Customizable Area End\n\n        runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n\n    }\n\n    async componentDidMount() {\n        window.scrollTo(0, 0);\n        this.getHelpCenter();\n        this.send(new Message(getName(MessageEnum.RequestUserCredentials)));\n        // Customizable Area Start\n\n        //@ts-ignore\n        const isNewUserToken = localStorage.getItem('SignUPtoken');\n        const isNewUserData = localStorage.getItem('signUpUser');\n        if (isNewUserData && isNewUserToken) {\n            localStorage.clear();\n        } else {\n            //@ts-ignore\n            if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && this.props.location?.state?.calledFrom !== \"guest-login\") {\n                this.props?.history?.push('/home-page');\n            }\n        }\n        // Customizable Area End\n    }\n\n    // Customizable Area Start\n    async verifyGuestToken() {\n        let token = window.localStorage.getItem(\"token\");\n        return token?.length;\n    }\n    // Customizable Area End\n\n    async receive(from: string, message: Message) {\n        // Customizable Area Start\n        runEngine.debugLog('Message Received', message);\n        if (message.id === getName(MessageEnum.RestAPIResponceMessage)) {\n            let apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n            var responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n            var errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n            if (apiRequestCallId === this.verfiySocialLoginApiCallId) {\n                if (responseJson) {\n                    if (this.state.socialMediaResult) {\n                        const { user, credential, additionalUserInfo } = this.state.socialMediaResult;\n                        let dat = {\n                            'email': user.email,\n                            'name': user.displayName\n                        }\n                        console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                        await localStorage.setItem('user', JSON.stringify(responseJson.data));\n                        await localStorage.setItem('token', responseJson.meta.token);\n                        await localStorage.setItem('profileImage', user.photoURL);\n                        await localStorage.setItem('userData', JSON.stringify(dat));\n                        const guestId = localStorage.getItem('guestUUID');\n                        if (guestId) {\n                            //@ts-ignore\n                            this.props.location?.state?.redirect === \"wishlist\"\n                                ?\n                                (\n                                    setTimeout(() => {\n                                        this.props.history.push({\n                                            pathname: \"/profilebio\",\n                                            state: { activeTab: \"wishlist\" }\n                                        });\n                                    }, 1000)\n                                )\n                                :\n                                setTimeout(() => {\n                                    this.props.history.push('/cart');\n                                }, 1000)\n                        } else {\n                            setTimeout(() => {\n                                this.props.history.push('/home-page');\n                            }, 1000)\n                        }\n\n                    }\n                }\n            }\n            if (apiRequestCallId === this.guestLoginApiCallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                        ...this.state,\n                        loading: false\n                    });\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token);\n                    //@ts-ignore\n                    window.notify([{ type: 'success', message: 'Welcome to Our Store !' }])\n                    this.props.history?.push('/home-page');\n                }\n            }\n            if (apiRequestCallId === this.loginAPICallID) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    const { data, meta } = responseJson;\n                    if (meta && meta.token) {\n                        localStorage.setItem(\"token\", meta.token)\n                    }\n                    if (data) {\n                        localStorage.setItem(\"user\", JSON.stringify(data));\n                        let dat = {\n                            'email': data.attributes.email,\n                            'name': data.attributes.full_name\n                        }\n                        //@ts-ignore\n                        const guestuserID = localStorage.getItem('guestUUID');\n\n                        localStorage.setItem('userData', JSON.stringify(dat));\n                        localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                        const GuesrUserId = localStorage.getItem('guestUUID');\n                        const GuestUserData = localStorage.getItem('guestUserData');\n                        if (GuestUserData && guestuserID) {\n                            //@ts-ignore\n                            this.props?.location?.state?.redirect === 'wishlist'\n                                ?\n                                setTimeout(() => {\n                                    this.props.history?.push({ pathname: '/profilebio', state: { activeTab: \"wishlist\" } })\n                                }, 1000)\n                                :\n                                // @ts-ignore\n                                this.routeToAll(\"/cart\");\n                        }\n                        else {\n                            //@ts-ignore\n                            window.notify([{ type: 'success', message: meta?.message }])\n                            // @ts-ignore\n                            this.routeToAll(\"/home-page\");\n                        }\n                    }\n                }\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0])\n                    this.setShowSpinner(false);\n                    // @ts-ignore\n                    window.notify([{ message: responseJson.errors[0].pin || \"Something went wrong!!!\", type: \"danger\" }]);\n                }\n            }\n            if (this.helpCenterCallId === apiRequestCallId) {\n                if (responseJson && responseJson.data && responseJson.data.length > 0) {\n                    this.setState({\n                        helpCenterData: responseJson.data\n                    })\n                }\n            }\n        }\n        else {\n\n        }\n        // Customizable Area End\n    }\n\n    logInWithFaceBook() {\n        console.log(\"logInWithFaceBook\")\n    }\n\n    logInWithGoogle() {\n        console.log(\"logInWithGoogle\")\n    }\n\n    routeToAll(route: string) {\n        this.props.history.push(route)\n    }\n\n    showPassword = (e: any) => {\n        e.preventDefault();\n        this.setState(prevState => ({\n            showPass: !prevState.showPass\n        }));\n    };\n\n    setShowSpinner = (value: boolean) => {\n        this.setState({ showSpinner: value })\n    }\n\n    //registartion through social Login\n    verifyEmailBeforeRegistartion = (resultData: any, socialMediaName: string) => {\n        //@ts-ignore\n        const guestuserID = localStorage.getItem('guestUUID');\n        let requestBody;\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.verfiySocialLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        if (guestuserID) {\n            requestBody = {\n                \"uuid\": guestuserID,\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken,\n\n                    }\n                }\n            };\n        } else {\n            requestBody = {\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken\n                    }\n                }\n            };\n        }\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //guest user login\n    guestLogin = () => {\n        this.setState({\n            ...this.state,\n            loading: true\n        });\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.guestLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        const generateID = uuid();\n        console.log(\"&&&&&&&&\", generateID);\n        localStorage.setItem('guestUUID', generateID);\n        const requestBody = {\n            \"data\": {\n                \"type\": \"guest_account\",\n                \"attributes\": {\n                    \"uuid\": generateID\n                }\n            }\n        };\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //Login Form\n    handleSubmitLogin = (data: any) => {\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        this.loginAPICallID = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    }\n\n    //get Helpecnetr data\n    getHelpCenter = () => {\n        const token = localStorage.getItem(\"token\");\n        const headers = {\n            token,\n            \"Content-Type\": \"application/json\"\n        }\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        this.helpCenterCallId = requestMessage.messageId;\n\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.getHelpCenterAPIEndPoint);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.validationApiMethodType);\n        // Sending Request to call API.\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    }\n}"]},"metadata":{},"sourceType":"module"}