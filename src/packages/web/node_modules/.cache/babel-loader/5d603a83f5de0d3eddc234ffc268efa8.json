{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4'; // Customizable Area Start\n// Customizable Area End\n\nexport var configJSON = require(\"./config\");\n\nvar EmailAccountLoginController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(EmailAccountLoginController, _BlockComponent);\n\n  var _super = _createSuper(EmailAccountLoginController);\n\n  // Customizable Area Start\n  // Customizable Area End\n  function EmailAccountLoginController(props) {\n    var _this;\n\n    _classCallCheck(this, EmailAccountLoginController);\n\n    _this = _super.call(this, props);\n    _this.apiEmailLoginCallId = \"\";\n    _this.validationApiCallId = \"\";\n    _this.emailReg = void 0;\n    _this.labelTitle = \"\";\n    _this.verfiySocialLoginApiCallId = void 0;\n    _this.guestLoginApiCallId = void 0;\n    _this.loginAPICallID = void 0;\n\n    _this.showPassword = function (e) {\n      e.preventDefault();\n\n      _this.setState(function (prevState) {\n        return {\n          showPass: !prevState.showPass\n        };\n      });\n    };\n\n    _this.setShowSpinner = function (value) {\n      _this.setState({\n        showSpinner: value\n      });\n    };\n\n    _this.verifyEmailBeforeRegistartion = function (resultData, socialMediaName) {\n      //@ts-ignore\n      var guestuserID = localStorage.getItem('guestUUID');\n      var requestBody;\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.verfiySocialLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n\n      if (guestuserID) {\n        requestBody = {\n          \"uuid\": guestuserID,\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      } else {\n        requestBody = {\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      }\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.guestLogin = function () {\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        loading: true\n      }));\n\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.guestLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var generateID = uuid();\n      console.log(\"&&&&&&&&\", generateID);\n      localStorage.setItem('guestUUID', generateID);\n      var requestBody = {\n        \"data\": {\n          \"type\": \"guest_account\",\n          \"attributes\": {\n            \"uuid\": generateID\n          }\n        }\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.handleSubmitLogin = function (data) {\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.loginAPICallID = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.CountryCodeMessage), getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.ReciveUserCredentials)];\n    _this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false,\n      activeTab: '1',\n      isOpenPopUp: false\n    };\n    _this.emailReg = new RegExp(\"\");\n    _this.labelTitle = configJSON.labelTitle; // Customizable Area End\n\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(EmailAccountLoginController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isNewUserToken, isNewUserData, _this$props$location, _this$props$location$, _this$props, _this$props$history;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.scrollTo(0, 0);\n                this.send(new Message(getName(MessageEnum.RequestUserCredentials))); // Customizable Area Start\n                //@ts-ignore\n\n                isNewUserToken = localStorage.getItem('SignUPtoken');\n                isNewUserData = localStorage.getItem('signUpUser');\n\n                if (isNewUserData && isNewUserToken) {\n                  localStorage.clear();\n                } else {\n                  //@ts-ignore\n                  if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && ((_this$props$location = this.props.location) === null || _this$props$location === void 0 ? void 0 : (_this$props$location$ = _this$props$location.state) === null || _this$props$location$ === void 0 ? void 0 : _this$props$location$.calledFrom) !== \"guest-login\") {\n                    (_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$history = _this$props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history.push('/home-page');\n                  }\n                } // Customizable Area End\n\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() // Customizable Area Start\n\n  }, {\n    key: \"verifyGuestToken\",\n    value: function () {\n      var _verifyGuestToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                token = window.localStorage.getItem(\"token\");\n                return _context2.abrupt(\"return\", token === null || token === void 0 ? void 0 : token.length);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function verifyGuestToken() {\n        return _verifyGuestToken.apply(this, arguments);\n      }\n\n      return verifyGuestToken;\n    }() // Customizable Area End\n\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(from, message) {\n        var _this2 = this;\n\n        var apiRequestCallId, responseJson, errorResponse, _this$state$socialMed, user, credential, additionalUserInfo, dat, guestId, _this$props$location2, _this$props$location3, _this$props$history2, data, meta, _dat, guestuserID, GuesrUserId, GuestUserData, _this$props2, _this$props2$location, _this$props2$location2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // Customizable Area Start\n                runEngine.debugLog('Message Received', message);\n\n                if (!(message.id === getName(MessageEnum.RestAPIResponceMessage))) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                if (!(apiRequestCallId === this.verfiySocialLoginApiCallId)) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!responseJson) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!this.state.socialMediaResult) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                _this$state$socialMed = this.state.socialMediaResult, user = _this$state$socialMed.user, credential = _this$state$socialMed.credential, additionalUserInfo = _this$state$socialMed.additionalUserInfo;\n                dat = {\n                  'email': user.email,\n                  'name': user.displayName\n                };\n                console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                _context3.next = 13;\n                return localStorage.setItem('user', JSON.stringify(responseJson.data));\n\n              case 13:\n                _context3.next = 15;\n                return localStorage.setItem('token', responseJson.meta.token);\n\n              case 15:\n                _context3.next = 17;\n                return localStorage.setItem('profileImage', user.photoURL);\n\n              case 17:\n                _context3.next = 19;\n                return localStorage.setItem('userData', JSON.stringify(dat));\n\n              case 19:\n                guestId = localStorage.getItem('guestUUID');\n\n                if (guestId) {\n                  //@ts-ignore\n                  ((_this$props$location2 = this.props.location) === null || _this$props$location2 === void 0 ? void 0 : (_this$props$location3 = _this$props$location2.state) === null || _this$props$location3 === void 0 ? void 0 : _this$props$location3.redirect) === \"wishlist\" ? setTimeout(function () {\n                    _this2.props.history.push({\n                      pathname: \"/profilebio\",\n                      state: {\n                        activeTab: \"wishlist\"\n                      }\n                    });\n                  }, 1000) : setTimeout(function () {\n                    _this2.props.history.push('/cart');\n                  }, 1000);\n                } else {\n                  setTimeout(function () {\n                    _this2.props.history.push('/home-page');\n                  }, 1000);\n                }\n\n              case 21:\n                if (apiRequestCallId === this.guestLoginApiCallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                      loading: false\n                    }));\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token); //@ts-ignore\n\n                    window.notify([{\n                      type: 'success',\n                      message: 'Welcome to Our Store !'\n                    }]);\n                    (_this$props$history2 = this.props.history) === null || _this$props$history2 === void 0 ? void 0 : _this$props$history2.push('/home-page');\n                  }\n                }\n\n                if (apiRequestCallId === this.loginAPICallID) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    data = responseJson.data, meta = responseJson.meta;\n\n                    if (meta && meta.token) {\n                      localStorage.setItem(\"token\", meta.token);\n                    }\n\n                    if (data) {\n                      localStorage.setItem(\"user\", JSON.stringify(data));\n                      _dat = {\n                        'email': data.attributes.email,\n                        'name': data.attributes.full_name\n                      }; //@ts-ignore\n\n                      guestuserID = localStorage.getItem('guestUUID');\n                      localStorage.setItem('userData', JSON.stringify(_dat));\n                      localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                      GuesrUserId = localStorage.getItem('guestUUID');\n                      GuestUserData = localStorage.getItem('guestUserData');\n\n                      if (GuestUserData && guestuserID) {\n                        //@ts-ignore\n                        ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$location = _this$props2.location) === null || _this$props2$location === void 0 ? void 0 : (_this$props2$location2 = _this$props2$location.state) === null || _this$props2$location2 === void 0 ? void 0 : _this$props2$location2.redirect) === 'wishlist' ? setTimeout(function () {\n                          var _this2$props$history;\n\n                          (_this2$props$history = _this2.props.history) === null || _this2$props$history === void 0 ? void 0 : _this2$props$history.push({\n                            pathname: '/profilebio',\n                            state: {\n                              activeTab: \"wishlist\"\n                            }\n                          });\n                        }, 1000) : // @ts-ignore\n                        this.routeToAll(\"/cart\");\n                      } else {\n                        //@ts-ignore\n                        window.notify([{\n                          type: 'success',\n                          message: meta === null || meta === void 0 ? void 0 : meta.message\n                        }]); // @ts-ignore\n\n                        this.routeToAll(\"/home-page\");\n                      }\n                    }\n                  }\n\n                  if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0]);\n                    this.setShowSpinner(false); // @ts-ignore\n\n                    window.notify([{\n                      message: responseJson.errors[0].pin || \"Something went wrong!!!\",\n                      type: \"danger\"\n                    }]);\n                  }\n                }\n\n                _context3.next = 25;\n                break;\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }()\n  }, {\n    key: \"logInWithFaceBook\",\n    value: function logInWithFaceBook() {\n      console.log(\"logInWithFaceBook\");\n    }\n  }, {\n    key: \"logInWithGoogle\",\n    value: function logInWithGoogle() {\n      console.log(\"logInWithGoogle\");\n    }\n  }, {\n    key: \"routeToAll\",\n    value: function routeToAll(route) {\n      this.props.history.push(route);\n    }\n  }]);\n\n  return EmailAccountLoginController;\n}(BlockComponent);\n\nexport { EmailAccountLoginController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/email-account-login/src/EmailLoginAccountController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","uuid","configJSON","require","EmailAccountLoginController","props","apiEmailLoginCallId","validationApiCallId","emailReg","labelTitle","verfiySocialLoginApiCallId","guestLoginApiCallId","loginAPICallID","showPassword","e","preventDefault","setState","prevState","showPass","setShowSpinner","value","showSpinner","verifyEmailBeforeRegistartion","resultData","socialMediaName","guestuserID","localStorage","getItem","requestBody","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","socialRegistartionAPIEndPoint","headers","credential","accessToken","RestAPIRequestHeaderMessage","RestAPIRequestBodyMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","guestLogin","state","loading","guestLoginAPIEndPoint","generateID","console","log","setItem","handleSubmitLogin","data","loginAPiEndPoint","receive","bind","subScribedMessages","CountryCodeMessage","RestAPIResponceMessage","ReciveUserCredentials","loginError","activeTab","isOpenPopUp","RegExp","attachBuildingBlock","window","scrollTo","send","RequestUserCredentials","isNewUserToken","isNewUserData","clear","verifyGuestToken","location","calledFrom","history","push","token","length","from","message","debugLog","apiRequestCallId","getData","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorResponse","RestAPIResponceErrorMessage","socialMediaResult","user","additionalUserInfo","dat","email","displayName","photoURL","meta","guestId","redirect","setTimeout","pathname","notify","type","attributes","full_name","image_url","GuesrUserId","GuestUserData","routeToAll","errors","pin","route"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4';\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n    navigation: any;\n    id: string;\n    history: any\n    // Customizable Area Start\n    // Customizable Area End\n}\n\ninterface S {\n    // Customizable Area Start\n    showSpinner: boolean;\n    loginError: string,\n    showPass: boolean,\n\n    loading?: boolean;\n    socialMediaResult?: any;\n    helpCenterData?: any;\n    // Customizable Area End\n}\n\ninterface SS {\n    // Customizable Area Start\n    id: any;\n    // Customizable Area End\n}\n\nexport default class EmailAccountLoginController extends BlockComponent<Props, S, SS> {\n\n    // Customizable Area Start\n    apiEmailLoginCallId: string = \"\";\n    validationApiCallId: string = \"\";\n    emailReg: RegExp;\n    labelTitle: string = \"\";\n    verfiySocialLoginApiCallId: string;\n    guestLoginApiCallId: string;\n    loginAPICallID: string;\n    // Customizable Area End\n\n    constructor(props: Props) {\n\n        super(props);\n        this.receive = this.receive.bind(this);\n        // Customizable Area Start\n        this.subScribedMessages = [\n            getName(MessageEnum.CountryCodeMessage),\n            getName(MessageEnum.RestAPIResponceMessage),\n            getName(MessageEnum.ReciveUserCredentials)\n        ]\n\n        this.state = {\n            showSpinner: false,\n            loginError: \"\",\n            showPass: false,\n            activeTab: '1',\n            isOpenPopUp: false\n        };\n\n        this.emailReg = new RegExp(\"\");\n        this.labelTitle = configJSON.labelTitle;\n        // Customizable Area End\n\n        runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n\n    }\n\n    async componentDidMount() {\n        window.scrollTo(0, 0);\n        this.send(new Message(getName(MessageEnum.RequestUserCredentials)));\n        // Customizable Area Start\n\n        //@ts-ignore\n        const isNewUserToken = localStorage.getItem('SignUPtoken');\n        const isNewUserData = localStorage.getItem('signUpUser');\n        if (isNewUserData && isNewUserToken) {\n            localStorage.clear();\n        } else {\n            //@ts-ignore\n            if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && this.props.location?.state?.calledFrom !== \"guest-login\") {\n                this.props?.history?.push('/home-page');\n            }\n        }\n        // Customizable Area End\n    }\n\n    // Customizable Area Start\n    async verifyGuestToken() {\n        let token = window.localStorage.getItem(\"token\");\n        return token?.length;\n    }\n    // Customizable Area End\n\n    async receive(from: string, message: Message) {\n        // Customizable Area Start\n        runEngine.debugLog('Message Received', message);\n        if (message.id === getName(MessageEnum.RestAPIResponceMessage)) {\n            let apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n            var responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n            var errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n            if (apiRequestCallId === this.verfiySocialLoginApiCallId) {\n                if (responseJson) {\n                    if (this.state.socialMediaResult) {\n                        const { user, credential, additionalUserInfo } = this.state.socialMediaResult;\n                        let dat = {\n                            'email': user.email,\n                            'name': user.displayName\n                        }\n                        console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                        await localStorage.setItem('user', JSON.stringify(responseJson.data));\n                        await localStorage.setItem('token', responseJson.meta.token);\n                        await localStorage.setItem('profileImage', user.photoURL);\n                        await localStorage.setItem('userData', JSON.stringify(dat));\n                        const guestId = localStorage.getItem('guestUUID');\n                        if (guestId) {\n                            //@ts-ignore\n                            this.props.location?.state?.redirect === \"wishlist\"\n                                ?\n                                (\n                                    setTimeout(() => {\n                                        this.props.history.push({\n                                            pathname: \"/profilebio\",\n                                            state: { activeTab: \"wishlist\" }\n                                        });\n                                    }, 1000)\n                                )\n                                :\n                                setTimeout(() => {\n                                    this.props.history.push('/cart');\n                                }, 1000)\n                        } else {\n                            setTimeout(() => {\n                                this.props.history.push('/home-page');\n                            }, 1000)\n                        }\n\n                    }\n                }\n            }\n            if (apiRequestCallId === this.guestLoginApiCallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                        ...this.state,\n                        loading: false\n                    });\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token);\n                    //@ts-ignore\n                    window.notify([{ type: 'success', message: 'Welcome to Our Store !' }])\n                    this.props.history?.push('/home-page');\n                }\n            }\n            if (apiRequestCallId === this.loginAPICallID) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    const { data, meta } = responseJson;\n                    if (meta && meta.token) {\n                        localStorage.setItem(\"token\", meta.token)\n                    }\n                    if (data) {\n                        localStorage.setItem(\"user\", JSON.stringify(data));\n                        let dat = {\n                            'email': data.attributes.email,\n                            'name': data.attributes.full_name\n                        }\n                        //@ts-ignore\n                        const guestuserID = localStorage.getItem('guestUUID');\n\n                        localStorage.setItem('userData', JSON.stringify(dat));\n                        localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                        const GuesrUserId = localStorage.getItem('guestUUID');\n                        const GuestUserData = localStorage.getItem('guestUserData');\n                        if (GuestUserData && guestuserID) {\n                            //@ts-ignore\n                            this.props?.location?.state?.redirect === 'wishlist'\n                                ?\n                                setTimeout(() => {\n                                    this.props.history?.push({ pathname: '/profilebio', state: { activeTab: \"wishlist\" } })\n                                }, 1000)\n                                :\n                                // @ts-ignore\n                                this.routeToAll(\"/cart\");\n                        }\n                        else {\n                            //@ts-ignore\n                            window.notify([{ type: 'success', message: meta?.message }])\n                            // @ts-ignore\n                            this.routeToAll(\"/home-page\");\n                        }\n                    }\n                }\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0])\n                    this.setShowSpinner(false);\n                    // @ts-ignore\n                    window.notify([{ message: responseJson.errors[0].pin || \"Something went wrong!!!\", type: \"danger\" }]);\n                }\n            }\n        }\n        else {\n\n        }\n        // Customizable Area End\n    }\n\n    logInWithFaceBook() {\n        console.log(\"logInWithFaceBook\")\n    }\n\n    logInWithGoogle() {\n        console.log(\"logInWithGoogle\")\n    }\n\n    routeToAll(route: string) {\n        this.props.history.push(route)\n    }\n\n    showPassword = (e: any) => {\n        e.preventDefault();\n        this.setState(prevState => ({\n            showPass: !prevState.showPass\n        }));\n    };\n\n    setShowSpinner = (value: boolean) => {\n        this.setState({ showSpinner: value })\n    }\n\n    //registartion through social Login\n    verifyEmailBeforeRegistartion = (resultData: any, socialMediaName: string) => {\n        //@ts-ignore\n        const guestuserID = localStorage.getItem('guestUUID');\n        let requestBody;\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.verfiySocialLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        if (guestuserID) {\n            requestBody = {\n                \"uuid\": guestuserID,\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken,\n\n                    }\n                }\n            };\n        } else {\n            requestBody = {\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken\n                    }\n                }\n            };\n        }\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //guest user login\n    guestLogin = () => {\n        this.setState({\n            ...this.state,\n            loading: true\n        });\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.guestLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        const generateID = uuid();\n        console.log(\"&&&&&&&&\", generateID);\n        localStorage.setItem('guestUUID', generateID);\n        const requestBody = {\n            \"data\": {\n                \"type\": \"guest_account\",\n                \"attributes\": {\n                    \"uuid\": generateID\n                }\n            }\n        };\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //Login Form\n    handleSubmitLogin = (data: any) => {\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        this.loginAPICallID = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    }\n}"]},"metadata":{},"sourceType":"module"}