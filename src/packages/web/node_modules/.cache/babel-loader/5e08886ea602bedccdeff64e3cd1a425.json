{"ast":null,"code":"import _regeneratorRuntime from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4';\nimport firebase from \"fire\"; // Customizable Area Start\n// Customizable Area End\n\nexport var configJSON = require(\"./config\");\n\nvar EmailAccountLoginController = /*#__PURE__*/function (_BlockComponent) {\n  _inherits(EmailAccountLoginController, _BlockComponent);\n\n  var _super = _createSuper(EmailAccountLoginController);\n\n  // Customizable Area Start\n  // Customizable Area End\n  function EmailAccountLoginController(props) {\n    var _this;\n\n    _classCallCheck(this, EmailAccountLoginController);\n\n    _this = _super.call(this, props);\n    _this.apiEmailLoginCallId = \"\";\n    _this.validationApiCallId = \"\";\n    _this.emailReg = void 0;\n    _this.labelTitle = \"\";\n    _this.verfiySocialLoginApiCallId = void 0;\n    _this.guestLoginApiCallId = void 0;\n    _this.loginAPICallID = void 0;\n\n    _this.showPassword = function (e) {\n      e.preventDefault();\n\n      _this.setState(function (prevState) {\n        return {\n          showPass: !prevState.showPass\n        };\n      });\n    };\n\n    _this.setShowSpinner = function (value) {\n      _this.setState({\n        showSpinner: value\n      });\n    };\n\n    _this.verifyEmailBeforeRegistartion = function (resultData, socialMediaName) {\n      //@ts-ignore\n      var guestuserID = localStorage.getItem('guestUUID');\n      var requestBody;\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.verfiySocialLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n\n      if (guestuserID) {\n        requestBody = {\n          \"uuid\": guestuserID,\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      } else {\n        requestBody = {\n          \"data\": {\n            \"type\": \"social_account\",\n            \"attributes\": {\n              \"provider\": socialMediaName,\n              \"access_token\": resultData.credential && resultData.credential.accessToken\n            }\n          }\n        };\n      }\n\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.guestLogin = function () {\n      _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n        loading: true\n      }));\n\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.guestLoginApiCallId = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      var generateID = uuid();\n      console.log(\"&&&&&&&&\", generateID);\n      localStorage.setItem('guestUUID', generateID);\n      var requestBody = {\n        \"data\": {\n          \"type\": \"guest_account\",\n          \"attributes\": {\n            \"uuid\": generateID\n          }\n        }\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.handleSubmitLogin = function (data) {\n      var requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n      _this.loginAPICallID = requestMessage.messageId;\n      requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n      var headers = {\n        'Content-Type': 'application/json'\n      };\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n      requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n      runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    _this.connectGoogle = function () {\n      var googleResult = new firebase.auth.GoogleAuthProvider();\n      googleResult.addScope('profile');\n      googleResult.addScope('email');\n      firebase.auth().signInWithPopup(googleResult).then(function (result) {\n        console.log(result, \"google result\");\n\n        if (result.credential && result.user && result.additionalUserInfo) {\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            socialMediaResult: result\n          }));\n\n          _this.verifyEmailBeforeRegistartion(result, 'google');\n        }\n      }).catch(function (err) {\n        console.log(\"Googleerrr\", err); // @ts-ignore\n\n        window.notify([{\n          message: 'Error Occured While connceting to Google' || \"Something went wrong!!!\",\n          type: \"danger\"\n        }]);\n      });\n    };\n\n    _this.connectFacebook = function () {\n      var facebookResult = new firebase.auth.FacebookAuthProvider();\n      facebookResult.addScope('email'); // facebookResult.setCustomParameters({\n      //   'display': 'popup'\n      // })\n\n      firebase.auth().signInWithPopup(facebookResult).then(function (result) {\n        console.log(result, \"facebook result\");\n\n        if (result.credential && result.user && result.additionalUserInfo) {\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            socialMediaResult: result\n          }));\n\n          _this.verifyEmailBeforeRegistartion(result, 'facebook');\n        }\n      }).catch(function (err) {\n        console.log(\"fbErr\", err); // @ts-ignore\n\n        window.notify([{\n          message: (err === null || err === void 0 ? void 0 : err.message) || 'Error Occured While connceting to Facebook',\n          type: \"danger\"\n        }]);\n      });\n    };\n\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this)); // Customizable Area Start\n\n    _this.subScribedMessages = [getName(MessageEnum.CountryCodeMessage), getName(MessageEnum.RestAPIResponceMessage), getName(MessageEnum.ReciveUserCredentials)];\n    _this.state = {\n      showSpinner: false,\n      loginError: \"\",\n      showPass: false,\n      activeTab: '1',\n      isOpenPopUp: false\n    };\n    _this.emailReg = new RegExp(\"\");\n    _this.labelTitle = configJSON.labelTitle; // Customizable Area End\n\n    runEngine.attachBuildingBlock(_assertThisInitialized(_this), _this.subScribedMessages);\n    return _this;\n  }\n\n  _createClass(EmailAccountLoginController, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isNewUserToken, isNewUserData, _this$props$location, _this$props$location$, _this$props, _this$props$history;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.scrollTo(0, 0);\n                this.send(new Message(getName(MessageEnum.RequestUserCredentials))); // Customizable Area Start\n                //@ts-ignore\n\n                isNewUserToken = localStorage.getItem('SignUPtoken');\n                isNewUserData = localStorage.getItem('signUpUser');\n\n                if (isNewUserData && isNewUserToken) {\n                  localStorage.clear();\n                } else {\n                  //@ts-ignore\n                  if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && ((_this$props$location = this.props.location) === null || _this$props$location === void 0 ? void 0 : (_this$props$location$ = _this$props$location.state) === null || _this$props$location$ === void 0 ? void 0 : _this$props$location$.calledFrom) !== \"guest-login\") {\n                    (_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$history = _this$props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history.push('/home-page');\n                  }\n                } // Customizable Area End\n\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() // Customizable Area Start\n\n  }, {\n    key: \"verifyGuestToken\",\n    value: function () {\n      var _verifyGuestToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                token = window.localStorage.getItem(\"token\");\n                return _context2.abrupt(\"return\", token === null || token === void 0 ? void 0 : token.length);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function verifyGuestToken() {\n        return _verifyGuestToken.apply(this, arguments);\n      }\n\n      return verifyGuestToken;\n    }() // Customizable Area End\n\n  }, {\n    key: \"receive\",\n    value: function () {\n      var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(from, message) {\n        var _this2 = this;\n\n        var apiRequestCallId, responseJson, errorResponse, _this$state$socialMed, user, credential, additionalUserInfo, dat, guestId, _this$props$location2, _this$props$location3, _this$props$history2, data, meta, _dat, guestuserID, GuesrUserId, GuestUserData, _this$props2, _this$props2$location, _this$props2$location2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // Customizable Area Start\n                runEngine.debugLog('Message Received', message);\n\n                if (!(message.id === getName(MessageEnum.RestAPIResponceMessage))) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n                responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n                errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n\n                if (!(apiRequestCallId === this.verfiySocialLoginApiCallId)) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!responseJson) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                if (!this.state.socialMediaResult) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                _this$state$socialMed = this.state.socialMediaResult, user = _this$state$socialMed.user, credential = _this$state$socialMed.credential, additionalUserInfo = _this$state$socialMed.additionalUserInfo;\n                dat = {\n                  'email': user.email,\n                  'name': user.displayName\n                };\n                console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                _context3.next = 13;\n                return localStorage.setItem('user', JSON.stringify(responseJson.data));\n\n              case 13:\n                _context3.next = 15;\n                return localStorage.setItem('token', responseJson.meta.token);\n\n              case 15:\n                _context3.next = 17;\n                return localStorage.setItem('profileImage', user.photoURL);\n\n              case 17:\n                _context3.next = 19;\n                return localStorage.setItem('userData', JSON.stringify(dat));\n\n              case 19:\n                guestId = localStorage.getItem('guestUUID');\n\n                if (guestId) {\n                  //@ts-ignore\n                  ((_this$props$location2 = this.props.location) === null || _this$props$location2 === void 0 ? void 0 : (_this$props$location3 = _this$props$location2.state) === null || _this$props$location3 === void 0 ? void 0 : _this$props$location3.redirect) === \"wishlist\" ? setTimeout(function () {\n                    _this2.props.history.push({\n                      pathname: \"/profilebio\",\n                      state: {\n                        activeTab: \"wishlist\"\n                      }\n                    });\n                  }, 1000) : setTimeout(function () {\n                    _this2.props.history.push('/cart');\n                  }, 1000);\n                } else {\n                  setTimeout(function () {\n                    _this2.props.history.push('/home-page');\n                  }, 1000);\n                }\n\n              case 21:\n                if (apiRequestCallId === this.guestLoginApiCallId) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n                      loading: false\n                    }));\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token); //@ts-ignore\n\n                    window.notify([{\n                      type: 'success',\n                      message: 'Welcome to Our Store !'\n                    }]);\n                    (_this$props$history2 = this.props.history) === null || _this$props$history2 === void 0 ? void 0 : _this$props$history2.push('/home-page');\n                  }\n                }\n\n                if (apiRequestCallId === this.loginAPICallID) {\n                  if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    data = responseJson.data, meta = responseJson.meta;\n\n                    if (meta && meta.token) {\n                      localStorage.setItem(\"token\", meta.token);\n                    }\n\n                    if (data) {\n                      localStorage.setItem(\"user\", JSON.stringify(data));\n                      _dat = {\n                        'email': data.attributes.email,\n                        'name': data.attributes.full_name\n                      }; //@ts-ignore\n\n                      guestuserID = localStorage.getItem('guestUUID');\n                      localStorage.setItem('userData', JSON.stringify(_dat));\n                      localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                      GuesrUserId = localStorage.getItem('guestUUID');\n                      GuestUserData = localStorage.getItem('guestUserData');\n\n                      if (GuestUserData && guestuserID) {\n                        //@ts-ignore\n                        ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$location = _this$props2.location) === null || _this$props2$location === void 0 ? void 0 : (_this$props2$location2 = _this$props2$location.state) === null || _this$props2$location2 === void 0 ? void 0 : _this$props2$location2.redirect) === 'wishlist' ? setTimeout(function () {\n                          var _this2$props$history;\n\n                          (_this2$props$history = _this2.props.history) === null || _this2$props$history === void 0 ? void 0 : _this2$props$history.push({\n                            pathname: '/profilebio',\n                            state: {\n                              activeTab: \"wishlist\"\n                            }\n                          });\n                        }, 1000) : // @ts-ignore\n                        this.routeToAll(\"/cart\");\n                      } else {\n                        //@ts-ignore\n                        window.notify([{\n                          type: 'success',\n                          message: meta === null || meta === void 0 ? void 0 : meta.message\n                        }]); // @ts-ignore\n\n                        this.routeToAll(\"/home-page\");\n                      }\n                    }\n                  }\n\n                  if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0]);\n                    this.setShowSpinner(false); // @ts-ignore\n\n                    window.notify([{\n                      message: responseJson.errors[0].pin || \"Something went wrong!!!\",\n                      type: \"danger\"\n                    }]);\n                  }\n                }\n\n                _context3.next = 25;\n                break;\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function receive(_x, _x2) {\n        return _receive.apply(this, arguments);\n      }\n\n      return receive;\n    }()\n  }, {\n    key: \"logInWithFaceBook\",\n    value: function logInWithFaceBook() {\n      console.log(\"logInWithFaceBook\");\n    }\n  }, {\n    key: \"logInWithGoogle\",\n    value: function logInWithGoogle() {\n      console.log(\"logInWithGoogle\");\n    }\n  }, {\n    key: \"routeToAll\",\n    value: function routeToAll(route) {\n      this.props.history.push(route);\n    }\n  }]);\n\n  return EmailAccountLoginController;\n}(BlockComponent);\n\nexport { EmailAccountLoginController as default };","map":{"version":3,"sources":["/home/lp-greenapex/Desktop/new_BB_BLOCK/freemium87482-350702-react-native/src/packages/blocks/email-account-login/src/EmailLoginAccountController.web.tsx"],"names":["Message","BlockComponent","MessageEnum","getName","runEngine","uuid","firebase","configJSON","require","EmailAccountLoginController","props","apiEmailLoginCallId","validationApiCallId","emailReg","labelTitle","verfiySocialLoginApiCallId","guestLoginApiCallId","loginAPICallID","showPassword","e","preventDefault","setState","prevState","showPass","setShowSpinner","value","showSpinner","verifyEmailBeforeRegistartion","resultData","socialMediaName","guestuserID","localStorage","getItem","requestBody","requestMessage","RestAPIRequestMessage","messageId","addData","RestAPIResponceEndPointMessage","socialRegistartionAPIEndPoint","headers","credential","accessToken","RestAPIRequestHeaderMessage","RestAPIRequestBodyMessage","JSON","stringify","RestAPIRequestMethodMessage","apiMethodTypeAddDetail","sendMessage","id","guestLogin","state","loading","guestLoginAPIEndPoint","generateID","console","log","setItem","handleSubmitLogin","data","loginAPiEndPoint","connectGoogle","googleResult","auth","GoogleAuthProvider","addScope","signInWithPopup","then","result","user","additionalUserInfo","socialMediaResult","catch","err","window","notify","message","type","connectFacebook","facebookResult","FacebookAuthProvider","receive","bind","subScribedMessages","CountryCodeMessage","RestAPIResponceMessage","ReciveUserCredentials","loginError","activeTab","isOpenPopUp","RegExp","attachBuildingBlock","scrollTo","send","RequestUserCredentials","isNewUserToken","isNewUserData","clear","verifyGuestToken","location","calledFrom","history","push","token","length","from","debugLog","apiRequestCallId","getData","RestAPIResponceDataMessage","responseJson","RestAPIResponceSuccessMessage","errorResponse","RestAPIResponceErrorMessage","dat","email","displayName","photoURL","meta","guestId","redirect","setTimeout","pathname","attributes","full_name","image_url","GuesrUserId","GuestUserData","routeToAll","errors","pin","route"],"mappings":"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","sourcesContent":["import { IBlock } from \"../../../framework/src/IBlock\";\nimport { Message } from \"../../../framework/src/Message\";\nimport { BlockComponent } from \"../../../framework/src/BlockComponent\";\nimport MessageEnum, { getName } from \"../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../framework/src/RunEngine\";\nimport { uuid } from 'uuidv4';\nimport firebase from \"fire\"\n// Customizable Area Start\n// Customizable Area End\n\nexport const configJSON = require(\"./config\");\n\nexport interface Props {\n    navigation: any;\n    id: string;\n    history: any\n    // Customizable Area Start\n    // Customizable Area End\n}\n\ninterface S {\n    // Customizable Area Start\n    showSpinner: boolean;\n    loginError: string,\n    showPass: boolean,\n\n    loading?: boolean;\n    socialMediaResult?: any;\n    helpCenterData?: any;\n    activeTab: any,\n    isOpenPopUp: boolean\n    // Customizable Area End\n}\n\ninterface SS {\n    // Customizable Area Start\n    id: any;\n    // Customizable Area End\n}\n\nexport default class EmailAccountLoginController extends BlockComponent<Props, S, SS> {\n\n    // Customizable Area Start\n    apiEmailLoginCallId: string = \"\";\n    validationApiCallId: string = \"\";\n    emailReg: RegExp;\n    labelTitle: string = \"\";\n    verfiySocialLoginApiCallId: string;\n    guestLoginApiCallId: string;\n    loginAPICallID: string;\n    // Customizable Area End\n\n    constructor(props: Props) {\n\n        super(props);\n        this.receive = this.receive.bind(this);\n        // Customizable Area Start\n        this.subScribedMessages = [\n            getName(MessageEnum.CountryCodeMessage),\n            getName(MessageEnum.RestAPIResponceMessage),\n            getName(MessageEnum.ReciveUserCredentials)\n        ]\n\n        this.state = {\n            showSpinner: false,\n            loginError: \"\",\n            showPass: false,\n            activeTab: '1',\n            isOpenPopUp: false\n        };\n\n        this.emailReg = new RegExp(\"\");\n        this.labelTitle = configJSON.labelTitle;\n        // Customizable Area End\n\n        runEngine.attachBuildingBlock(this as IBlock, this.subScribedMessages);\n\n    }\n\n    async componentDidMount() {\n        window.scrollTo(0, 0);\n        this.send(new Message(getName(MessageEnum.RequestUserCredentials)));\n        // Customizable Area Start\n\n        //@ts-ignore\n        const isNewUserToken = localStorage.getItem('SignUPtoken');\n        const isNewUserData = localStorage.getItem('signUpUser');\n        if (isNewUserData && isNewUserToken) {\n            localStorage.clear();\n        } else {\n            //@ts-ignore\n            if (window.localStorage.getItem(\"guestUUID\") && this.verifyGuestToken() && this.props.location?.state?.calledFrom !== \"guest-login\") {\n                this.props?.history?.push('/home-page');\n            }\n        }\n        // Customizable Area End\n    }\n\n    // Customizable Area Start\n    async verifyGuestToken() {\n        let token = window.localStorage.getItem(\"token\");\n        return token?.length;\n    }\n    // Customizable Area End\n\n    async receive(from: string, message: Message) {\n        // Customizable Area Start\n        runEngine.debugLog('Message Received', message);\n        if (message.id === getName(MessageEnum.RestAPIResponceMessage)) {\n            let apiRequestCallId = message.getData(getName(MessageEnum.RestAPIResponceDataMessage));\n            var responseJson = message.getData(getName(MessageEnum.RestAPIResponceSuccessMessage));\n            var errorResponse = message.getData(getName(MessageEnum.RestAPIResponceErrorMessage));\n            if (apiRequestCallId === this.verfiySocialLoginApiCallId) {\n                if (responseJson) {\n                    if (this.state.socialMediaResult) {\n                        const { user, credential, additionalUserInfo } = this.state.socialMediaResult;\n                        let dat = {\n                            'email': user.email,\n                            'name': user.displayName\n                        }\n                        console.log(user.photoURL, \"user.photoURL\", JSON.stringify(dat), \"this.state\", this.state.socialMediaResult);\n                        await localStorage.setItem('user', JSON.stringify(responseJson.data));\n                        await localStorage.setItem('token', responseJson.meta.token);\n                        await localStorage.setItem('profileImage', user.photoURL);\n                        await localStorage.setItem('userData', JSON.stringify(dat));\n                        const guestId = localStorage.getItem('guestUUID');\n                        if (guestId) {\n                            //@ts-ignore\n                            this.props.location?.state?.redirect === \"wishlist\"\n                                ?\n                                (\n                                    setTimeout(() => {\n                                        this.props.history.push({\n                                            pathname: \"/profilebio\",\n                                            state: { activeTab: \"wishlist\" }\n                                        });\n                                    }, 1000)\n                                )\n                                :\n                                setTimeout(() => {\n                                    this.props.history.push('/cart');\n                                }, 1000)\n                        } else {\n                            setTimeout(() => {\n                                this.props.history.push('/home-page');\n                            }, 1000)\n                        }\n\n                    }\n                }\n            }\n            if (apiRequestCallId === this.guestLoginApiCallId) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setState({\n                        ...this.state,\n                        loading: false\n                    });\n                    localStorage.setItem('guestUserData', JSON.stringify(responseJson.data));\n                    localStorage.setItem('token', responseJson.meta.token);\n                    //@ts-ignore\n                    window.notify([{ type: 'success', message: 'Welcome to Our Store !' }])\n                    this.props.history?.push('/home-page');\n                }\n            }\n            if (apiRequestCallId === this.loginAPICallID) {\n                if (responseJson && responseJson.data && responseJson.meta) {\n                    this.setShowSpinner(false);\n                    const { data, meta } = responseJson;\n                    if (meta && meta.token) {\n                        localStorage.setItem(\"token\", meta.token)\n                    }\n                    if (data) {\n                        localStorage.setItem(\"user\", JSON.stringify(data));\n                        let dat = {\n                            'email': data.attributes.email,\n                            'name': data.attributes.full_name\n                        }\n                        //@ts-ignore\n                        const guestuserID = localStorage.getItem('guestUUID');\n\n                        localStorage.setItem('userData', JSON.stringify(dat));\n                        localStorage.setItem('profileImage', data.attributes.image_url && data.attributes.image_url);\n                        const GuesrUserId = localStorage.getItem('guestUUID');\n                        const GuestUserData = localStorage.getItem('guestUserData');\n                        if (GuestUserData && guestuserID) {\n                            //@ts-ignore\n                            this.props?.location?.state?.redirect === 'wishlist'\n                                ?\n                                setTimeout(() => {\n                                    this.props.history?.push({ pathname: '/profilebio', state: { activeTab: \"wishlist\" } })\n                                }, 1000)\n                                :\n                                // @ts-ignore\n                                this.routeToAll(\"/cart\");\n                        }\n                        else {\n                            //@ts-ignore\n                            window.notify([{ type: 'success', message: meta?.message }])\n                            // @ts-ignore\n                            this.routeToAll(\"/home-page\");\n                        }\n                    }\n                }\n                if (responseJson && responseJson.errors && responseJson.errors.length > 0) {\n                    console.log(\"fgbfdgbb\", responseJson.errors[0])\n                    this.setShowSpinner(false);\n                    // @ts-ignore\n                    window.notify([{ message: responseJson.errors[0].pin || \"Something went wrong!!!\", type: \"danger\" }]);\n                }\n            }\n        }\n        else {\n\n        }\n        // Customizable Area End\n    }\n\n    logInWithFaceBook() {\n        console.log(\"logInWithFaceBook\")\n    }\n\n    logInWithGoogle() {\n        console.log(\"logInWithGoogle\")\n    }\n\n    routeToAll(route: string) {\n        this.props.history.push(route)\n    }\n\n    showPassword = (e: any) => {\n        e.preventDefault();\n        this.setState(prevState => ({\n            showPass: !prevState.showPass\n        }));\n    };\n\n    setShowSpinner = (value: boolean) => {\n        this.setState({ showSpinner: value })\n    }\n\n    //registartion through social Login\n    verifyEmailBeforeRegistartion = (resultData: any, socialMediaName: string) => {\n        //@ts-ignore\n        const guestuserID = localStorage.getItem('guestUUID');\n        let requestBody;\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.verfiySocialLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.socialRegistartionAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        if (guestuserID) {\n            requestBody = {\n                \"uuid\": guestuserID,\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken,\n\n                    }\n                }\n            };\n        } else {\n            requestBody = {\n                \"data\": {\n                    \"type\": \"social_account\",\n                    \"attributes\": {\n                        \"provider\": socialMediaName,\n                        \"access_token\": resultData.credential && resultData.credential.accessToken\n                    }\n                }\n            };\n        }\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //guest user login\n    guestLogin = () => {\n        this.setState({\n            ...this.state,\n            loading: true\n        });\n\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n\n        this.guestLoginApiCallId = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.guestLoginAPIEndPoint);\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        const generateID = uuid();\n        console.log(\"&&&&&&&&\", generateID);\n        localStorage.setItem('guestUUID', generateID);\n        const requestBody = {\n            \"data\": {\n                \"type\": \"guest_account\",\n                \"attributes\": {\n                    \"uuid\": generateID\n                }\n            }\n        };\n\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), headers);\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(requestBody));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    };\n\n    //Login Form\n    handleSubmitLogin = (data: any) => {\n        const requestMessage = new Message(getName(MessageEnum.RestAPIRequestMessage));\n        this.loginAPICallID = requestMessage.messageId;\n        requestMessage.addData(getName(MessageEnum.RestAPIResponceEndPointMessage), configJSON.loginAPiEndPoint);\n\n        const headers = {\n            'Content-Type': 'application/json'\n        };\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestHeaderMessage), JSON.stringify(headers));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestBodyMessage), JSON.stringify(data));\n        requestMessage.addData(getName(MessageEnum.RestAPIRequestMethodMessage), configJSON.apiMethodTypeAddDetail);\n\n        runEngine.sendMessage(requestMessage.id, requestMessage);\n    }\n    //connect to google account\n    connectGoogle = () => {\n        const googleResult = new firebase.auth.GoogleAuthProvider();\n        googleResult.addScope('profile');\n        googleResult.addScope('email');\n        firebase.auth().signInWithPopup(googleResult)\n            .then(result => {\n                console.log(result, \"google result\");\n                if (result.credential && result.user && result.additionalUserInfo) {\n                    this.setState({\n                        ...this.state,\n                        socialMediaResult: result\n                    });\n                    this.verifyEmailBeforeRegistartion(result, 'google');\n                }\n            }).catch(err => {\n                console.log(\"Googleerrr\", err);\n                // @ts-ignore\n                window.notify([{ message: 'Error Occured While connceting to Google' || \"Something went wrong!!!\", type: \"danger\" }]);\n            });\n    };\n    //connect to facebook account\n    connectFacebook = () => {\n        const facebookResult = new firebase.auth.FacebookAuthProvider();\n        facebookResult.addScope('email');\n        // facebookResult.setCustomParameters({\n        //   'display': 'popup'\n        // })\n        firebase.auth().signInWithPopup(facebookResult).then(result => {\n            console.log(result, \"facebook result\");\n            if (result.credential && result.user && result.additionalUserInfo) {\n                this.setState({\n                    ...this.state,\n                    socialMediaResult: result\n                });\n                this.verifyEmailBeforeRegistartion(result, 'facebook');\n            }\n        }).catch(err => {\n            console.log(\"fbErr\", err);\n            // @ts-ignore\n            window.notify([{ message: err?.message || 'Error Occured While connceting to Facebook', type: \"danger\" }]);\n        })\n    };\n\n}"]},"metadata":{},"sourceType":"module"}